<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="../Public/lib/html5.js"></script>
    <script type="text/javascript" src="../Public/lib/respond.min.js"></script>
    <script type="text/javascript" src="../Public/lib/PIE-2.0beta1/PIE_IE678.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../Public/css/element-ui-2.2.css?v=<{$Think.const.V}>">
    <link rel="stylesheet" type="text/css" href="../Public/lib/Hui-iconfont/1.0.1/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="../Public/lib/icheck/icheck.css" />
    <link rel="stylesheet" type="text/css" href="../Public/css/jqeury-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="../Public/css/H-ui.min.css">
    <link rel="stylesheet" type="text/css" href="../Public/css/style.css?v=20170306" />
    <link rel="stylesheet" href="../Public/css/common.css?v=2017082"/>
    <link rel="stylesheet" href="../Public/css/default.css"/>
    <title></title>
</head>
<style>
    label.error {
        right: 18px;
        top: 5px;
        color: #ef392b;
        font-size: 12px;
        background-color: #fbe2e2;
        border-color: #c66161;
    }
    .show_main {
        position: relative;
    }
    .hidden_show{
        width: 5%;
        position: absolute;
        opacity: 0;
        left: 10px;
        height: 31px;
    }
    .show_main span{
        margin-bottom: 5px;
    }
    .contact {
        width: 200px !important;
        margin: 0 5px;
    }
    .icon-btn {
        cursor: pointer;
    }
    .btn-gray {
        margin: 3px !important;
    }
</style>
<body>
<div id="add-supplier">
    <div class="commom_wrap">
        <form action="" method="post" id="supplier" enctype="multipart/form-data">
            <input type="hidden" name="m" value="<{$Think.MODULE_NAME}>">
            <input type="hidden" name="a" value="<{$Think.ACTION_NAME}>">
            
            <div class="gys-wrap">
                <div class="row row_title">
                    <a class="active"><{$Think.lang.$title}></a>
                </div>
                <input type="hidden" name="ID" value="<{$result.ID}>"/>
                <div class="basis-info">
                    
                    <table class="table table-bg">
                        <thead>
                        <tr>
                            <th width="10%"></th>
                            <th width="40%"></th>
                            <th width="10%"></th>
                            <th width="40%"></th>
                        </tr>
                        </thead>
                        <tbody class="text-le">
                            <tr>
                                <td colspan="4">{{$lang('基本信息')}}</td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('供应商名称')}}</td>
                                <td>
                                    <input type="text" name="SP_NAME" value="<{$result.SP_NAME}>" :placeholder="$lang('深圳和义通科技有限公司')" class="form-control">
                                </td>
                                <td class="must">{{$lang('供应商简称')}}</td>
                                <td>
                                    <input type="text" name="SP_RES_NAME" value="<{$result.SP_RES_NAME}>" class="form-control">
                                </td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('英文名称')}}</td>
                                <td>
                                    <input type="text" name="SP_NAME_EN" value="<{$result.SP_NAME_EN}>" placeholder="Shenzhen HeYiTong Technology Co .,Ltd" class="form-control">
                                </td>
                                <td class="must">{{$lang('英文简称')}}</td>
                                <td>
                                    <input type="text" name="SP_RES_NAME_EN" value="<{$result.SP_RES_NAME_EN}>" placeholder="HYT" class="form-control">
                                </td>
                            </tr>
                            <tr>    
                                <td class="must">{{$lang('营业执照/个人证件号')}}></td>
                                <td>
                                    <input type="text" name="SP_CHARTER_NO" value="<{$result.SP_CHARTER_NO}>" class="form-control">
                                </td>
                                <td class="must">{{$lang('营业执照/个人证件')}}</td>
                                <td class="show_main show_main_update">
                                    <!--<input type="file" name="SP_ANNEX_ADDR" id="SP_ANNEX_ADDR">-->
                                    <!--主体营业执照-->
                                    <div>
                                        <button class="btn" href="#supplier_file" id="supplier_file_name">
                                            <?php
                                                $SPANNEXNAME = $result['SP_ANNEX_NAME']?$result['SP_ANNEX_NAME']:'上传主体营业执照'
                                            ?>
                                            <{$Think.lang.$SPANNEXNAME}>
            
                                            <!-- <{$result['SP_ANNEX_NAME']?$result['SP_ANNEX_NAME']:上传主体营业执照}> -->
                                        </button>
                                        <input style="position: absolute;width: 152px !important; top: 0px;left:0px;" type="file" name="SP_ANNEX_ADDR" class="hidden_show" id="supplier_file" onchange="document.getElementById('supplier_file_name').innerHTML = this.value?this.value:'<{$Think.lang.上传主体营业执照}>'"/>
                                    </div>
                                    <span></span>
                                    <!--关联公司营业执照-->
                                    <div>
                                        <button style="position: absolute;" class="btn" href="#supplier_company_file" id="supplier_company_file_name">
                                            <!-- <{$result['SP_ANNEX_NAME2']?$result['SP_ANNEX_NAME2']:上传关联公司营业执照}> -->
                                            <?php
                                                $SPANNEXNAME2 = $result['SP_ANNEX_NAME2']?$result['SP_ANNEX_NAME2']:'上传关联公司营业执照'
                                            ?>
                                            <{$Think.lang.$SPANNEXNAME2}>
                                        
                                        </button>
                                        <input style="position: absolute;width: 152px !important; top: 0px;left:0px;" type="file" name="SP_ANNEX_ADDR2" class="hidden_show" id="supplier_company_file" onchange="document.getElementById('supplier_company_file_name').innerHTML = this.value?this.value:'<{$Think.lang.上传关联公司营业执照}>'"/>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('企业类型')}}</td>
                                <td class="ctcd ctcd_type">
              
                                    <template v-for="company_type in company_type_cd">
                                        <span class="btn-gray" :class="{'btn-orange': company_type.is_checked}" :value="company_type.cd" @click="handleSelected(company_type)">{{$lang(company_type.cdVal)}}</span>
                                        <!-- btn-orange -->
                                    </template>
                                    <input type="hidden" name="COPANY_TYPE_CD" class="COPANY_TYPE_CD" value="<{$result.COPANY_TYPE_CD}>"/>
                                </td>
                                <td class="must">{{$lang('供应商年业务规模')}}</td>
                                <td class="sysc">
                                    <?php $spYearScaleCd = BaseModel::spYearScaleCd() ?>
                                    <foreach name="spYearScaleCd" key="k" item="val">
                                        <if condition="$result.SP_YEAR_SCALE_CD eq $k"><span value="<{$k}>" class="gys_check_item gys_check_item_active"><{$val}></span>
                                            <else /><span value="<{$k}>" class="gys_check_item"><{$val}></span>
                                        </if>
            
                                    </foreach>
                                    <input type="hidden" name="SP_YEAR_SCALE_CD" class="SP_YEAR_SCALE_CD" value="<{$result.SP_YEAR_SCALE_CD}>"/>
                                </td>
                            </tr>
            
                            <tr>
                                <td class="must">{{$lang('采购团队')}}</td>
                                <td class="multiple_team">
                                    <select name="SP_TEAM_CD[]" class="required">
                                        <option value="" selected="true">{{$lang('请选择采购团队')}}</option>
                                        <foreach name="spTeamCd" key="k" item="val" class="SP_TEAM_CD">
                                            <if condition="$result.SP_TEAM_CD eq $k"><option value="<{$k}>" selected="true"><{$Think.lang.$val}></option>
                                                <else /><option value="<{$k}>"><{$Think.lang.$val}></option>
                                            </if>
                                        </foreach>
                                    </select>
                                    <li class="label label-default radius add_nodes" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-add"></i></li>
                                    <li class="label label-default radius del_nodes" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-jianhao"></i></li>
                                </td>
                                <td class="must">{{$lang('介绍团队')}}</td>
                                <td class="multiple_spt">
                                    <select name="SP_JS_TEAM_CD" required>
                                        <option value="" selected="true">{{$lang('请选择介绍团队')}}</option>
                                        <foreach name="spJsTeamCd" key="k" item="val">
                                            <if condition="$result.SP_JS_TEAM_CD eq $k"><option value="<{$k}>" selected="selected"><{$Think.lang.$val}></option>
                                                <else /><option value="<{$k}>"><{$Think.lang.$val}></option>
                                            </if>
                                        </foreach>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('注册地址')}}</td>
                                <td class="sel-map">
                                    <select id="s_country" name="SP_ADDR1"></select>
                                    <select style="display: none;" id="s_province" name="SP_ADDR2">
                                    </select>
                                    <select id="s_city" name="SP_ADDR3" >
                                    </select>
                                    <select id="s_county" name="SP_ADDR4">
                                    </select>
                                </td>
                                <td class="must">{{$lang('供货品类')}}</td>
                                <td id="goods_type-td">
                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" id="goods_type-show">
                                        <i>+</i>
                                    {{$lang('添加品类')}}
                                    </button>
                                    <input type="hidden" name="SP_CAT_CD" id="SP_CAT_CD" value="<{$result.SP_CAT_CD}>"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('办公地址')}}</td>
                                <td class="sel-map">
                                    <select id="t_country" name="SP_ADDR5"></select>
                                    <select style="display: none;" id="t_province" name="SP_ADDR6">
                                    </select>
                                    <select id="t_city" name="SP_ADDR7" >
                                    </select>
                                    <select id="t_county" name="SP_ADDR8">
                                    </select>
                                </td>
                                <td class="must">{{$lang('办公详细地址')}}</td>
                                <td><input type="text" name="COMPANY_ADDR_INFO" value="<{$result.COMPANY_ADDR_INFO}>" :placeholder="$lang('供应商详细地址')"/></td>
                            </tr>
                            <tr>
                                <td class="must">{{$lang('公司与市场地位简述')}}</td>
                                <td><input type="text" name="COMPANY_MARKET_INFO" value="<{$result.COMPANY_MARKET_INFO}>" :placeholder="$lang('一句话介绍供应商，和描述供应商的市场地位，所获殊荣，所获得融资等信息')"/></td>

                                <td class="">{{$lang('供应商详细英文地址')}}</td>
                                <td><input type="text" name="COMPANY_ADDR_EN" value="<{$result.COMPANY_ADDR_EN}>" :placeholder="$lang('供应商详细英文地址')"/></td>

                            </tr>
                            <tr>
                                <td>{{$lang('备注(选填)')}}</td>
                                <td> <textarea rows="5" style="width: 100%;" name="SP_REMARK"><{$result.SP_REMARK}></textarea></td>
                                <td v-if="showSecretaryContact" class="must">{{$lang('秘书公司联系方式')}}</td>
                                <td v-if="showSecretaryContact">
                                    <template v-for="contact in secretaryCompanyContact">
                                        <input class="contact" name="secretary_company_telephone[]" class="secretary_company_telephone" type="text" v-model="contact.contact"/>
                                    </template>
                                    <li class="label label-default radius icon-btn" @click="addSecretaryCompanyContact" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-add"></i></li>
                                    <li class="label label-default radius icon-btn" @click="delSecretaryCompanyContact" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-jianhao"></i></li>
                                </td>
                            </tr>
                            <tr>
                                <td v-if="showAgentContact" class="must">{{$lang('代理记账公司联系方式')}}</td>
                                <td colspan="3" v-if="showAgentContact">
                                    <template v-for="contact in agentCompanyContact">
                                        <input class="contact" name="agency_company_telephone[]" class="agency_company_telephone" type="text" v-model="contact.contact"/>
                                    </template>
                                    <li class="label label-default radius icon-btn" @click="addAgentCompanyContact" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-add"></i></li>
                                    <li class="label label-default radius icon-btn" @click="delAgentCompanyContact" style="background-color: #ffffff;"><i class="Hui-iconfont Hui-iconfont-jianhao"></i></li>
                                </td>
                            </tr>
                            <?php
                                if ($access ['Supplier/cooperative_rating']) {
                            ?>
                            <tr>
                                <td>{{$lang('合作评级')}}</td>
                                <td colspan="3" class="cooperative_rating_check">
                                    <?php $cooperativeRating = BaseModel::getCooperativeRating() ?>
                                    <foreach name="cooperativeRating" key="k" item="val">
                                        <if condition="$result.cooperative_rating eq $k"><span value="<{$k}>" class="gys_check_item gys_check_item_active"><{$val}></span>
                                            <else /><span value="<{$k}>" class="gys_check_item"><{$val}></span>
                                        </if>
                                    </foreach>
                                    <input type="hidden" name="cooperative_rating" class="cooperative_rating" id="cooperative_rating" value="<{$result.cooperative_rating}>"/>
                                </td>
                            </tr>
                            <?php
                                }
                            ?>
                        </tbody>
                    </table>
            
                    <!-- 账号信息 -->
                    <table id="supplier_account" class="table table-bg">
                        <thead>
                        <tr>
                            <th width="10%"></th>
                            <th width="40%"></th>
                            <th width="10%"></th>
                            <th width="40%"></th>
                        </tr>
                        </thead>
                        <tbody class="text-le">
                            <tr>
                                <td colspan="4">{{$lang('账号信息')}}</td>
                            </tr>
                            <tr>
                                <td>{{$lang('收款账号开户行')}}</td>
                                <td>
                                    {{SP_BANK_CD}}
                                </td>
                                <td>{{$lang('收款账户名')}}</td>
                                <td>
                                    {{collection_account_name}}
                                    
                                </td>
                            </tr>
                            <tr>
                                <td>{{$lang('收款银行账号')}}</td>
                                <td>
                                    {{BANK_ACCOUNT}}
                                </td>
                                <td>SWIFT CODE</td>
                                <td>
                                    {{SWIFT_CODE}}
                                </td>
                            </tr>
                            <tr>
                                <td>{{$lang('收款银行本地结算代码')}}</td>
                                <td>
                                    <el-input name="BANK_SETTLEMENT_CODE" v-model="BANK_SETTLEMENT_CODE" ></el-input>
                                </td>
                                <td>{{$lang('收款银行地址')}}</td>
                                <td>
                                    <el-select v-model="selectCountry"  filterable name="country" id="country_input" clearable 
                                                :placeholder="$lang('国家')">
                                        <el-option v-for="item in country" :key="item.id" :label="item.zh_name"
                                                    :value="item.id"></el-option>
                                    </el-select>
                                    <el-select  v-model="selectProvince"  filterable name="province" id="province_input" clearable 
                                                :placeholder="$lang('省市')">
                                        <el-option v-for="item in province" :key="item.id" :label="item.zh_name"
                                                    :value="item.id"></el-option>
                                    </el-select>
                                    <el-select  v-model="selectCounty"  filterable name="county" id="county_input" clearable 
                                                :placeholder="$lang('区县')">
                                        <el-option v-for="item in county" :key="item.id" :label="item.zh_name"
                                                    :value="item.id"></el-option>
                                    </el-select>
                                    <input type="hidden" name="BANK_ADDRESS" id="city_input"/>
                                    <input type="hidden" name="CITY" id="cityID_input"/>
                                </td>
                            </tr>
                            <tr>
                                <td>{{$lang('收款银行详细地址')}}</td>
                                <td>
                                    <el-input name="BANK_ADDRESS_DETAIL" v-model="BANK_ADDRESS_DETAIL" ></el-input>
                                </td>
                                <td>{{$lang('收款银行邮编')}}</td>
                                <td>
                                    <el-input name="BANK_POSTAL_CODE" v-model="BANK_POSTAL_CODE" ></el-input>
                                </td>
                            </tr>
                            <tr>
                                <td>{{$lang('收款账号币种')}}</td>
                                <td>
                                    <el-select v-model="currency_cd" clearable  filterable :placeholder="$lang('请选择')">
                                        <el-option
                                        v-for="item in currency"
                                        :key="item.cd"
                                        :label="item.cdVal"
                                        :value="item.cd">
                                        </el-option>
                                    </el-select>
                                    <input type="hidden" name="ACCOUNT_CURRENCY" v-model="currency_cd"/>
                                </td>
                                <td>{{$lang('收款账户种类')}}</td>
                                <td>
                                    <el-select v-model="collection_account_type_cd" clearable  filterable :placeholder="$lang('请选择')">
                                        <el-option
                                        v-for="item in collection_account_type"
                                        :key="item.cd"
                                        :label="item.cdVal"
                                        :value="item.cd">
                                        </el-option>
                                    </el-select>
                                    <input type="hidden" name="ACCOUNT_TYPE" v-model="collection_account_type_cd"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            
            </div>

            
            <include file="goods_type" />
            <div class="gys-wrap">
                <div class="gys_wrap_btn">
                    <button class="btn gys_btn_submit" @click="handleSubmit" type="submit">{{$lang('提交')}}</button>
                    <button class="btn gys_btn_reset" type="reset" id="reset">{{$lang('重置')}}</button>
                </div>
            </div>
        </form>
        <div id="show"></div>
    </div>
</div>
<script type="text/javascript" src="../Public/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../Public/lib/My97DatePicker/WdatePicker.js"></script>
<script type="text/javascript" src="../Public/lib/layer/1.9.3/layer.js"></script>
<script type="text/javascript" src="../Public/lib/laypage/1.2/laypage.js"></script>
<script type="text/javascript" src="../Public/js/H-ui.js"></script>
<script type="text/javascript" src="../Public/js/H-ui.admin.js?<{$Think.config.VER_NUM}>"></script>
<script type="text/javascript" src="../Public/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="../Public/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="../Public/js/validate-methods.js"></script>
<!-- <script type="text/javascript" src="../Public/js/messages_zh.min.js"></script> -->
<script type="text/javascript" src="../Public/js/jquery.form.min.js"></script>
<script type="text/javascript" src="../Public/js/ajaxupload.js"></script>
<script type="text/javascript" src="../Public/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../Public/js/vue.2.5.13.js"></script>
<script type="text/javascript" src="../Public/js/axios.min.js"></script>
<script type="text/javascript" src="../Public/js/element-ui-2.2.js"></script>
</body>
<script>
    var VM = new Vue({
        el: '#add-supplier',
        data: {
            companyTypeCd: [],
            comTypeCds: [],
            SP_BANK_CD:'',
            collection_account_name:'',
            BANK_ACCOUNT:'',
            SWIFT_CODE:'',
            currency:[],
            collection_account_type:[],
            BANK_SETTLEMENT_CODE:'',
            BANK_ADDRESS_DETAIL:'',
            BANK_POSTAL_CODE:'',
            currency_cd:'',
            collection_account_type_cd:'',
            country:[],
            province:[],
            county:[],
            selectCountry:'',
            selectProvince:'',
            selectCounty:'',
            secretaryCompanyContact: [{contact: ''}],
            agentCompanyContact: [{contact: ''}],
            company_type_cd: [],
            showSecretaryContact: '<{$result.COPANY_TYPE_CD}>'.split(',').indexOf('N001190902') === -1 ? false : true,
            showAgentContact: '<{$result.COPANY_TYPE_CD}>'.split(',').indexOf('N001190903') === -1 ? false : true,
            COPANY_TYPE: '<{$result.COPANY_TYPE_CD}>'.split(','),
            secretary_company_telephone: '<{$result.secretary_company_telephone}>'.split(','),
            agency_company_telephone: '<{$result.agency_company_telephone}>'.split(','),
            must_need_upload: '<?= $must_need_upload_file ?>'
        },
        created() {
            this.getCommonData()
            this.getAccountData()
            this.secretaryCompanyContact = this.secretary_company_telephone.map(item => {return {contact: item}})
            this.agentCompanyContact = this.agency_company_telephone.map(item => {return {contact: item}})
        },
        methods: {
            getCommonData:function(){
                var _this = this
                axios.post('index.php?g=oms&m=CommonData&a=commonData', {
                    data: {
                        query: {
                            "currency_open": true,
                            "collection_account_type":true,
                            "company_type": true, //  新增企业类型返回
                        }
                    }
                }).then(function (res) {
                    if(res.data.code == 2000){
                        _this.currency = res.data.data.currency_open
                        _this.collection_account_type = res.data.data.collection_account_type
                        res.data.data.company_type.forEach(function(item) {
                            if (_this.COPANY_TYPE.indexOf(item.cd) !== -1) {
                                item.is_checked = true
                            } else {
                                item.is_checked = false
                            }
                        })
                        _this.company_type_cd = res.data.data.company_type
                    }
                })
                axios.post('/index.php?g=common&m=index&a=get_area', {
                    "parent_no": 0,
                    "is_id":''
                }).then(function (res) {
                    if (res.data.code == 2000) {
                        _this.country = res.data.data;
                    } else {
                        _this.$message({
                            message: data.msg,
                            type: 'error'
                        });
                    }
                })
            },
            getAccountData:function () {
                var _this = this
                _this.BANK_SETTLEMENT_CODE = '<{$result.BANK_SETTLEMENT_CODE}>'
                _this.BANK_ADDRESS_DETAIL = '<{$result.BANK_ADDRESS_DETAIL}>'
                _this.BANK_POSTAL_CODE = '<{$result.BANK_POSTAL_CODE}>'
                _this.currency_cd = '<{$result.ACCOUNT_CURRENCY}>'
                _this.collection_account_type_cd = '<{$result.ACCOUNT_TYPE}>'

                if ('<{$result.CITY}>') {
                    area = '<{$result.CITY}>'.split(',');
                    _this.selectCountry = area[0] || '';
                    _this.selectProvince = area[1] || '';
                    _this.selectCounty = area[2] || '';
                }


                // _this.selectCountry = '1'

                axios.post('/index.php?g=common&m=index&a=contract_info', {
                    "SP_NAME":'<{$result.SP_NAME}>',
                    "CON_COMPANY_CD":'',
                    "CON_NO":'',
                    "CON_NAME":'',
                }).then(function (res) {
                    if(res.data.code == 2000 && res.data.data){
                        var result = res.data.data;
                        var hasData = result.length > 0 ? true : false;
                        _this.SP_BANK_CD = hasData ? result[0].SP_BANK_CD : '';
                        _this.collection_account_name = hasData ? result[0].collection_account_name : '';
                        _this.BANK_ACCOUNT = hasData ? result[0].BANK_ACCOUNT : '';
                        _this.SWIFT_CODE = hasData ? result[0].SWIFT_CODE : ''
                    }
                })
            },
            addSecretaryCompanyContact() {
                this.secretaryCompanyContact.push({contact: ''});
            },
            delSecretaryCompanyContact() {
                this.secretaryCompanyContact.pop();
            },
            addAgentCompanyContact() {
                this.agentCompanyContact.push({contact: ''});
            },
            delAgentCompanyContact() {
                this.agentCompanyContact.pop();
            },
            // 企业类型选中
            handleSelected(company_type) {
                company_type.is_checked = !company_type.is_checked;
                // 秘书公司
                if (company_type.cd === 'N001190902') {
                    this.showSecretaryContact = company_type.is_checked
                }
                // 代理记账公司
                if (company_type.cd === 'N001190903') {
                    this.showAgentContact = company_type.is_checked
                }
                var codeArray = [];
                this.company_type_cd.forEach(function(item) {
                    if (item.is_checked) {
                        codeArray.push(item.cd);
                    }
                })
                $('.COPANY_TYPE_CD').val(codeArray.join(','))
            },
            handleSubmit() {
                // 表单验证
                var _this = this;
                if (_this.showSecretaryContact) {
                    var text = "";
                    _this.secretaryCompanyContact.forEach(function (item) {
                        if (!item.contact) {
                            text = "秘书公司联系方式不能为空";
                        }
                    })
                    if (text) {
                        layer.msg(_this.$lang(text));
                        return false;
                    }
                }
                if (_this.showAgentContact) {
                    var text = "";
                    _this.agentCompanyContact.forEach(function (item) {
                        if (!item.contact) {
                            text = "代理记账公司联系方式不能为空";
                        }
                    })
                    if (text) {
                        layer.msg(_this.$lang(text));
                        return false;
                    }
                }
                 // 校验采购团队是否重复选择
                function checkTeam() {
                    var temparr = [];
                    var nowTemp = '';
                    var isFalse = true;
                    $('.multiple_team select option:selected').each(function () {
                        nowTemp = $(this).html();
                        if (temparr.length > 0) {
                            for (var i = 0; i < temparr.length; i ++) {
                                if (temparr [i] == nowTemp) {
                                    isFalse = false;
                                }
                            }
                        }
                        temparr.push(nowTemp);
                    });
                    return isFalse;
                }
                // 校验是否有重名的采购和介绍团队
                function checkmult() {
                    var temparr = [];
                    var isFalse = true;
                    $('.multiple_team select option:selected').each(function () {
                        temparr.push($(this).html());
                    });
                    var tempspt = $("select[name='SP_JS_TEAM_CD'] option:selected").html();
                    for (var i = 0; i < temparr.length; i ++) {
                        if (temparr [i] == tempspt) {
                            isFalse = false;
                        }
                    }
                    return isFalse;
                }
                // 针对性的表单验证
                function validate(formData, jqForm, options) {
                    var form = jqForm[0]; 
                }
                $("#supplier").validate({
                    debug: true,
                    rules: {
                        SP_NAME: "required",
                        SP_CHARTER_NO: "required",
                        COPANY_TYPE_CD: "required",
                        SP_YEAR_SCALE_CD: "required",
                        SP_TEAM_CD: "required",
                        //SP_ANNEX_ADDR: "required",
                        SP_JS_TEAM_CD: "required",
                        SP_ADDR1: "required",
                        //SP_ADDR2: "required",
                        SP_RES_NAME_EN: "required",
                        COMPANY_ADDR_INFO: "required",
                        //COMPANY_ADDR_EN: "required",
                        COMPANY_MARKET_INFO: "required",
                        SP_NAME_EN: "required",
                        SP_RES_NAME: "required",
                        //SP_ADDR3: "required",
                        SP_ADDR5: "required",
                        //SP_ADDR6: "required",
                        SP_ADDR3: {
                            required: function() {
                                if ($("#s_city option").length > 1) {
                                    return true;
                                } else {
                                    return false;
                                }
                            }
                        },
                        SP_ADDR4: {
                            required: function() {
                                if ($("#s_county option").length > 1) {
                                    return true;
                                } else {
                                    return false;
                                }
                            }
                        },
                        SP_ADDR7: {
                            required: function() {
                                if ($("#t_city option").length > 1) {
                                    return true;
                                } else {
                                    return false;
                                }
                            }
                        },
                        SP_ADDR8: {
                            required: function() {
                                if ($("#t_county option").length > 1) {
                                    return true;
                                } else {
                                    return false;
                                }
                            }
                        },
                        SP_CAT_CD: "required",
                    },
                    messages: {
                        SP_NAME: "<{$Think.lang.请输入供应商名称}>",
                        SP_CHARTER_NO: "<{$Think.lang.请输入营业执照号}>",
                        COPANY_TYPE_CD: "<{$Think.lang.请选择企业类型}>",
                        SP_YEAR_SCALE_CD: "<{$Think.lang.请选择供应商年业务规模}>",
                        SP_TEAM_CD: "<{$Think.lang.请选择采购团队}>",
                        SP_JS_TEAM_CD: "<{$Think.lang.请选择介绍团队}>",
                        SP_ADDR1: "<{$Think.lang.国别}>",
                        SP_ADDR2: "<{$Think.lang.国别}>",
                        SP_ADDR3: "<{$Think.lang.省}>",
                        SP_ADDR4: "<{$Think.lang.市、县}>",
                        SP_CAT_CD: "<{$Think.lang.请选择商品分类}>",
                        SP_RES_NAME_EN: "<{$Think.lang.请输入英文简称}>",
                        COMPANY_ADDR_INFO: "<{$Think.lang.请输入供应商详细地址}>",
                        COMPANY_ADDR_EN: "<{$Think.lang.供应商详细英文地址}>",
                        COMPANY_MARKET_INFO: "<{$Think.lang.公司与市场地位简述}>",
                        SP_NAME_EN: "<{$Think.lang.请输入英文名称}>",
                        SP_ADDR5: "<{$Think.lang.国别}>",
                        SP_ADDR7: "<{$Think.lang.省}>",
                        SP_ADDR8: "<{$Think.lang.市县}>",
                        SP_RES_NAME: "<{$Think.lang.请输入供应商简称}>",
                    },
                    submitHandler:function(form){
                        if (!checkTeam()) {
                            layer.msg('<{$Think.lang.采购团队重复选择}>');
                            return false;
                        }
                        // 采购团队，介绍团队验证是否有重复
                        if (!checkmult()) {
                            layer.msg('<{$Think.lang.采购团队、介绍团队重复选择}>');
                            return false;
                        }
                        if (!$("#supplier_file").val() && _this.must_need_upload == 1) {
                            layer.msg('<{$Think.lang.请上传营业执照}>');
                            return false;
                        }
                        
                        var bank_address = ''
                        var bank_address_id = ''
                        if($("#county_input").val()){
                            bank_address = $("#country_input").val() + '-' +  $("#province_input").val() + '-' +  $("#county_input").val()
                            bank_address_id = VM.selectCountry + ',' + VM.selectProvince + ',' + VM.selectCounty
                        }else if($("#province_input").val() && !$("#county_input").val()){
                            bank_address = $("#country_input").val() + '-' +  $("#province_input").val()
                            bank_address_id = VM.selectCountry + ',' + VM.selectProvince
                        }else if($("#country_input").val() && !$("#province_input").val()){
                            bank_address = $("#country_input").val()
                            bank_address_id = VM.selectCountry
                        }else if(!$("#country_input").val()){
                            bank_address = ''
                            bank_address_id = ''
                        }
                        $("#city_input").val(bank_address)
                        $("#cityID_input").val(bank_address_id)
                        
                        if (VM.showSecretaryContact) {
                            var secretary_company_telephone = [];
                            VM.secretaryCompanyContact.forEach(function (item) {
                                secretary_company_telephone.push(item.contact)
                            })
                            $('.secretary_company_telephone').val(secretary_company_telephone)
                        }
                        if (VM.showAgentContact) {
                            var agency_company_telephone = [];
                            VM.agentCompanyContact.forEach(function(item) {
                                agency_company_telephone.push(item.contact);
                            })
                            $('.agency_company_telephone').val(agency_company_telephone)
                        }
                        
                        var options = {
                            beforeSubmit: validate,
                            beforeSend  : function () {
                                index = layer.load(2, {
                                    shade: [0.5,'#fff'] //0.1透明度的白色背景
                                });
                            },
                            success     : function(data, status, xhr) {
                                data = JSON.parse(data);
                                if (data.status == 1) {
                                    layer.msg(data.msg);
                                    setTimeout(function () {
                                        window.location.href = '/index.php?m=supplier&a=show&ID=' + data.data.ID;
                                    }, 2000);
                                } else {
                                    layer.msg(data.data);
                                }
                                layer.close(index);
                            },
                            error       : function(xhr, status, error) {
                                var context = options.context || this;
                                layer.msg(error);
                            },
                        };
                        $('#supplier').ajaxSubmit(options);
                    }
                });
            }
        },
        watch: {
            selectCountry: function (newVal) {
                var _this = this;
                if (!newVal) return;
                axios.post('/index.php?g=common&m=index&a=get_area', {
                        parent_no: newVal,
                        is_id:'Y'
                }).then(function (res) {
                  if (res.data.code == 2000) {
                    _this.province = res.data.data;

                    if(res.data.data == null){
                        _this.selectProvince = '';
                        _this.county = [];
                        _this.selectCounty = '';
                    }else{
                        var provinceAll = res.data.data
                        var status = '1'
                        for(var i=0;i<provinceAll.length;i++){
                            if(provinceAll[i].id == _this.selectProvince){
                                status = '2'
                            }
                        }
                        if(status == '1'){
                            _this.selectProvince = '';
                            _this.county = [];
                            _this.selectCounty = '';
                        }
                    }

                  } else {
                    _this.$message({
                      message: data.msg,
                      type: 'error'
                    });
                  }
                })


            },
            selectProvince:function(newVal){
                var _this = this;
                if (!newVal || !_this.selectCountry) return;
                var parentId = _this.selectCountry + ',' + newVal;

                axios.post('/index.php?g=common&m=index&a=get_area', {
                        parent_no: newVal,
                        is_id:'Y'
                }).then(function (res) {
                  if (res.data.code == 2000) {
                    _this.county = res.data.data;

                    if(res.data.data == null){
                        _this.selectCounty = '';
                    }else{
                        var countyAll = res.data.data
                        var status = '1'
                        for(var i=0;i<countyAll.length;i++){
                            if(countyAll[i].id == _this.selectCounty){
                                status = '2'
                            }
                        }
                        if(status == '1'){
                            _this.selectCounty = '';
                        }
                    }
                  } else {
                    _this.$message({
                      message: data.msg,
                      type: 'error'
                    });
                  }
                })

            }
        }
    })

    $('#supplier').on('submit', function () {
        event.preventDefault();
    })

    $(function() {
        var must_need_upload = '<?= $must_need_upload_file ?>';
        // 文件异步上传功能块
        window.onload = function() {
            _initConTypeCode();
        };
        var conTypeCode = new Array();
        // 企业类型，改为可多选
        $(".ctcd span").click(function() {
            _this = $(this);
            if (_this.attr('is_checked') == 1) {
                _this.css({'background':'#C8D2D7 ',"color":"#546E7A"});//.siblings().css({'background':'#dddddd'});
                _this.attr('is_checked', '0');
                // 删除再次选中的企业类型
                for (var i = 0; i < conTypeCode.length; i ++) {
                    if (conTypeCode[i] == _this.attr('value')) {
                        conTypeCode.splice(i, 1);
                    }
                }
            } else {
                conTypeCode.push(_this.attr('value'));
                _this.css({'background':'#FF5224 ',"color":"white"});//.siblings().css({'background':'#dddddd'});
                _this.attr('is_checked', '1');
            }
            
            $(".COPANY_TYPE_CD").val(conTypeCode);
            $("#COPANY_TYPE_CD-error").css('display', 'none');
        });
        //初始化对企业类型进行数据写入
        function _initConTypeCode()
        {
            var conTypeCds = '<?= $result['COPANY_TYPE_CD'] ?>';
            if (conTypeCds.length > 0) {
                var arr = conTypeCds.split(',');
                for (var i = 0; i < arr.length; i++) {
                    conTypeCode.push(arr[i]);
                }
            }
        }
        //供应商年务规模
        $(".sysc span").click(function() {
            $(this).addClass("gys_check_item_active").siblings().removeClass("gys_check_item_active");
            $(".SP_YEAR_SCALE_CD").val($(this).attr('value'));
            $("#SP_YEAR_SCALE_CD-error").css('display', 'none');
        });
        //合作评级
        $(".cooperative_rating_check span").click(function() {
            $(this).addClass("gys_check_item_active").siblings().removeClass("gys_check_item_active");
            $(".cooperative_rating").val($(this).attr('value'));
            $("#cooperative_rating-error").css('display', 'none');
        });
        //采购团队功能代码
        var App = function() {
            var app = this;
            var opts = [];
            var selectedOpts = [];
            // 采购团队增加团队
            var create_select = function (exists) {
                var options = '';
                options += '<option value="" selected="selected"><{$Think.lang.请选择采购团队}></option>';
                $.each(opts, function (i, e) {
                    if (exists && (i == exists)) {
                        options += '<option value="'+i+'" selected="selected">' + e + '</option>';
                    } else {
                        options += '<option value="'+i+'">' + e + '</option>';
                    }
                });
                var shtml = '<select name="SP_TEAM_CD[]" class="required">';
                shtml += options;
                shtml += '</select>';
                return shtml;
            };
            app.add = function () {
                return create_select();
            };
            app.pushOpts = function (optVal) {
                selectedOpts.push(optVal);
            };
            app.delOpts = function (optVal) {
                for (var i = 0; i < selectedOpts.length; i ++) {
                    if (options[i] == optVal) {
                        options.splice(i, 1);
                        return;
                    }
                }
            };
            // 初始化采购团队
            app.init = function () {
                var sp_cds = '<?= $result['SP_TEAM_CD'] ?>';
                var arr = sp_cds.split(',');
                if (arr.length == 1) {
                    return;
                } else {
                    $(".multiple_team select").remove();
                    for (var i = 0; i < arr.length; i++) {
                        $(create_select(arr[i])).insertBefore($('.add_nodes'));    
                    }
                }
            };
            
            (function () {
                opts = eval("(" + '<?= json_encode($spTeamCd) ?>' + ")");
            })();
        };

        var app = new App();
        app.init();
        
        $('.add_nodes').click(function() {
            $(app.add()).insertBefore($('.add_nodes'));
        });
        $('.del_nodes').click(function() {
            if ($(".multiple_team select").length == 1) {
                return false;   
            } else {
                $('.multiple_team select:last').remove();    
            }
            //$(app.add()).insertBefore($('.add_nodes'));
        });

        var sydata = '';
        // 国、省、市、县
        var area = function (conf, init) {
            var ar = this;
            this.conf = conf;
            this.init = init;
            this.need_init = true;
            this.defineName = ["<{$Think.lang.国别}>", '<{$Think.lang.国别}>', '<{$Think.lang.省}>', '<{$Think.lang.市、县}>'];

            this.curlRequest = function (url, id) {
                $.ajax({
                    url: url,
                    type: "post",
                    // iframe: true,
                    dataType:'json',
                    data: {'id': id},
                    async: false,
                    beforeSend:function(XMLHttpRequest){
                    },
                    success: function (data) {
                        sydata = data.data;
                    },
                    error:function(XMLHttpRequest,textStatus,errorThrown){
                        layer.msg('error...状态文本值：'+textStatus+" 异常信息："+errorThrown);
                    }
                });
                return sydata;
            };

            this.getData = function (checkId, id) {
                switch (checkId) {
                    case 1:
                        return ar.getProvince(id);
                        break;
                    case 2:
                        return ar.getCity(id);
                        break;
                    case 3:
                        return ar.getCounty(id);
                        break;
                }
            };

            this.getProvince = function (id) {
                var url = '<{:U("supplier/get_province")}>';
                return ar.curlRequest(url, id);
            };

            this.getCity = function (id) {
                var url = '<{:U("supplier/get_city")}>';
                return ar.curlRequest(url, id);
            };

            this.getCounty = function (id) {
                var url = '<{:U("supplier/get_county")}>';
                return ar.curlRequest(url, id);
            };

            this.ze_me = function setOptions (index, cfg, dName) {
                var s_country = document.getElementById(cfg[index]);
                with(s_country) {
                    var str = '';
                    length = 0;
                    options [0] = new Option(ar.defineName[index], "");
                    if(index && document.getElementById(cfg[index-1]).selectedIndex > 0 || !index){
                        if(true){
                            var data = '';
                            if (index == 0) {
                                data = eval('<?= json_encode($country) ?>');
                                $(data).each(function (i, e) {
                                    i ++;
                                    options [i] = new Option(e.NAME, e.ID);
                                });
                            }
                            else if (index == 1) {
                                var p_i = document.getElementById(cfg[index-1]).value;
                                var sindex = document.getElementById(cfg[index-1]).selectedIndex;
                                var p_v = document.getElementById(cfg[index-1]).options[sindex].text;
                                data = [{"NAME": p_v, "ID": p_i}];
                                $(data).each(function (i, e) {
                                    i ++;
                                    options [i] = new Option(e.NAME, e.ID);
                                });
                            } else if (index == 2) {
                                str = document.getElementById(cfg[index - 1]).value;
                                var ret = ar.getCity(str);
                                data = ret;
                                $(data).each(function (i, e) {
                                    i ++;
                                    options [i] = new Option(e.NAME, e.ID);
                                });
                            } else if (index ==3) {
                                str = document.getElementById(cfg[index - 2]).value + ',';
                                str += document.getElementById(cfg[index - 1]).value;
                                var ret = ar.getCounty(str);
                                data = ret;
                                $(data).each(function (i, e) {
                                    i ++;
                                    options [i] = new Option(e.NAME, e.ID);
                                });
                            }
                            if (ar.need_init == true) {
                                if (init[index]) {
                                    for (var i = 0; i < options.length; i++) {
                                        if (options[i].value == init[index]) {
                                            options[i].selected = true;
                                        }
                                    }
                                    if (index == 1) {
                                        options[1].selected = true;
                                    }
                                    
                                } else {
                                    options[0].selected = true;
                                }
                            } else {
                                if (index) options[0].selected = true;
                                if (index == 1) options[1].selected = true;
                            }
                        }
                    }

                    if(++index < cfg.length){setOptions(index, cfg, dName);}
                }
            };

            // construct
            (function(){
                $(document.getElementById(ar.conf[0])).bind('change',function(){
                    ar.ze_me(1, ar.conf, ar.defineName);
                });
                $(document.getElementById(ar.conf[1])).bind('change',function(){
                    ar.ze_me(2, ar.conf, ar.defineName);
                });
                $(document.getElementById(ar.conf[2])).bind('change',function(){
                    ar.ze_me(3, ar.conf, ar.defineName);
                });
                ar.ze_me(0, ar.conf, ar.defineName);
                ar.need_init = false;
            })();
        };
        var init_cs = ['<?= $result['SP_ADDR1'] ?>', '<?= $result['SP_ADDR2'] ?>', '<?= $result['SP_ADDR3'] ?>', '<?= $result['SP_ADDR4'] ?>'];
        new area(['s_country', 's_province', 's_city', 's_county'], init_cs);

        // 保存选中的商品类型
        var goodsType = new Array();
        var spanObj = new Array();
        $('#myModal .goods-type span').click(function() {
            _this = $(this);
            var goodsCd = _this.attr('value');
            if (_this.attr('ischecked') == 'false') {
                _this.css('background', '#00CC99');
                _this.attr('ischecked', true);
                goodsType.push(goodsCd);
                spanObj.push(_this);
            } else {
                _this.css('background', '#ed2d65');
                _this.attr('ischecked', false);
                if (spanObj.length > 0) {
                    for (var i = 0; i < spanObj.length; i ++) {
                        if (_this[0] == spanObj[i][0]) {
                            spanObj.splice(i, 1);
                        }
                    }
                }
                $.each(goodsType, function(i, e) {
                    if (goodsCd == e) {
                        goodsType.splice(i, 1);
                    }
                });
            }
            _dynamicSpan();
            _writeInput();
        });

        // 动态生成span商品框
        function  _dynamicSpan()
        {
            // 生成span之前，需要清理
            _clean();
            var show = $("#goods_type-show");
            var shtml = '';
            if (spanObj.length > 0) {
                $.each(spanObj, function(i, e) {
                    shtml += '<span style="background:#00CC99;color:white;">' + e.text() + '</span>';
                });
            }

            $(shtml).insertBefore(show);
        }

        // 清理已生成的，避免重复
        function _clean()
        {
            $("#goods_type-td span").remove();
        }

        function _writeInput()
        {
            $("#SP_CAT_CD").val(goodsType);
        }
        
        // 初始化商品选中信息
        function _initGoods()
        {
            var goods_cds = '<?= $result['SP_CAT_CD'] ?>';
            if (goods_cds.length > 0) {

                var arr = goods_cds.split(',');
                goodsType = arr;

                // 初始化span对象
                for (var i = 0; i < $(".init-goods-type span").length; i ++) {
                    for (var j = 0; j < arr.length; j ++) {
                        var span = $(".init-goods-type span:eq("+i+")");
                        var val = span.attr('value');
                        if(val == arr[j]) {
                            spanObj.push(span);
                            span.css('background', '#00CC99');
                            span.attr('ischecked', true);
                        }    
                    }
                }
                // 初始化重绘
                _dynamicSpan();
                _writeInput();
            }
        }
        _initGoods();
    });
    
(function(){
    var sydata = '';
    // 国、省、市、县
    var area = function (conf, init) {

        var ar = this;
        this.conf = conf;
        this.init = init;
        this.need_init = true;
        this.defineName = ["<{$Think.lang.国别}>", '<{$Think.lang.国别}>', '<{$Think.lang.省}>', '<{$Think.lang.市、县}>'];

        this.curlRequest = function (url, id) {
            $.ajax({
                url: url,
                type: "post",
                // iframe: true,
                dataType:'json',
                data: {'id': id},
                async: false,
                beforeSend:function(XMLHttpRequest){
                },
                success: function (data) {
                    sydata = data.data;
                },
                error:function(XMLHttpRequest,textStatus,errorThrown){
                    layer.msg('error...状态文本值：'+textStatus+" 异常信息："+errorThrown);
                }
            });
            return sydata;
        };

        this.getData = function (checkId, id) {
            switch (checkId) {
                case 1:
                    return ar.getProvince(id);
                    break;
                case 2:
                    return ar.getCity(id);
                    break;
                case 3:
                    return ar.getCounty(id);
                    break;
            }
        };

        this.getProvince = function (id) {
            var url = '<{:U("supplier/get_province")}>';
            return ar.curlRequest(url, id);
        };

        this.getCity = function (id) {
            var url = '<{:U("supplier/get_city")}>';
            return ar.curlRequest(url, id);
        };

        this.getCounty = function (id) {
            var url = '<{:U("supplier/get_county")}>';
            return ar.curlRequest(url, id);
        };

        this.ze_me = function setOptions (index, cfg, dName) {
            var s_country = document.getElementById(cfg[index]);
            with(s_country) {
                var str = '';
                length = 0;
                options [0] = new Option(ar.defineName[index], "");
                if(index && document.getElementById(cfg[index-1]).selectedIndex > 0 || !index){
                    if(true){
                        var data = '';
                        if (index == 0) {
                            data = eval('<?= json_encode($country) ?>');
                            $(data).each(function (i, e) {
                                i ++;
                                options [i] = new Option(e.NAME, e.ID);
                            });
                        }
                        else if (index == 1) {
                            var p_i = document.getElementById(cfg[index-1]).value;
                            var sindex = document.getElementById(cfg[index-1]).selectedIndex;
                            var p_v = document.getElementById(cfg[index-1]).options[sindex].text;
                            data = [{"NAME": p_v, "ID": p_i}];
                            $(data).each(function (i, e) {
                                i ++;
                                options [i] = new Option(e.NAME, e.ID);
                            });
                        } else if (index == 2) {
                            str = document.getElementById(cfg[index - 1]).value;
                            var ret = ar.getCity(str);
                            data = ret;
                            $(data).each(function (i, e) {
                                i ++;
                                options [i] = new Option(e.NAME, e.ID);
                            });
                        } else if (index ==3) {
                            str = document.getElementById(cfg[index - 2]).value + ',';
                            str += document.getElementById(cfg[index - 1]).value;
                            var ret = ar.getCounty(str);
                            data = ret;
                            $(data).each(function (i, e) {
                                i ++;
                                options [i] = new Option(e.NAME, e.ID);
                            });
                        }
                        if (ar.need_init == true) {
                            if (init[index]) {
                                for (var i = 0; i < options.length; i++) {
                                    if (options[i].value == init[index]) {
                                        options[i].selected = true;
                                    }
                                }
                                if (index == 1) {
                                    options[1].selected = true;
                                }
                                
                            } else {
                                options[0].selected = true;
                            }
                        } else {
                            if (index) options[0].selected = true;
                            if (index == 1) options[1].selected = true;
                        }
                    }
                }
                if(++index < cfg.length){setOptions(index, cfg, dName);}
            }
        };

        // construct
        (function(){
            $(document.getElementById(ar.conf[0])).bind('change',function(){
                ar.ze_me(1, ar.conf, ar.defineName);
            });
            $(document.getElementById(ar.conf[1])).bind('change',function(){
                ar.ze_me(2, ar.conf, ar.defineName);
            });
            $(document.getElementById(ar.conf[2])).bind('change',function(){
                ar.ze_me(3, ar.conf, ar.defineName);
            });
            ar.ze_me(0, ar.conf, ar.defineName);
            ar.need_init = false;
        })();
    };
    var init_cs = ['<?= $result['SP_ADDR5'] ?>', '<?= $result['SP_ADDR6'] ?>', '<?= $result['SP_ADDR7'] ?>', '<?= $result['SP_ADDR8'] ?>'];
    new area(['t_country', 't_province', 't_city', 't_county'], init_cs);

    $("#myModal .modal-content").on("click",".modal-body span",function () {
        if($(this).prop("ischecked")){
            $(this).css({"background":"white"});
        }else{
        }
    });
})();
</script>
</html>