<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>高级配置</title>
    <link rel="stylesheet" href="../Public/utils/css/public.style.css?v=0907">
    <link rel="stylesheet" href="../Public/css/element-ui-2.2.css?v=<{$Think.const.V}>">
    <link rel="stylesheet" href="../Public/../Hr/depList.css?v=123">
    <link rel="stylesheet" href="../Public/icon/css/font-awesome.min.css">
    <link rel="stylesheet" href="./Application/Tpl/Home/Public/css/default.css?v=<{$Think.const.V}>">
    <style>
        [v-cloak] {
            display: none;
        }
        #detailOther td {
            width: 700px;
        }
        #detailOther table {
            margin-left: 20px;
        }

        .store_detail {
            margin-left: 30px;
        }

        .store_detail .active {
            opacity: 1;
        }

        .store_detail a {
            cursor: pointer;
            font-weight: bold;
            opacity: 0.5;
            margin-right: 30px;
        }

        table td{
            height: 30px;
        }
        table i {
            font-style: normal;
            padding-right: 3px;
            /* color: red; */
        }
        .text span{
            display: inline-block;
            width: 300px;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .el-switch.is-checked .el-switch__core:after {
            left: 100%;
            margin-left: -17px;
        }

        .el-switch__core:after {
            content: "";
            position: absolute;
            top: 1px;
            left: 1px;
            border-radius: 100%;
            transition: all .3s;
            width: 16px;
            height: 16px;
            background-color: #fff;
        }

        .temporal__interval {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .temporal__intervalj-message {
            display: flex;
            align-items: center;
        }
        .el-icon-question {
            font-size: 24px;
            margin-left: 12px;
            cursor: pointer;
        }
        .token{
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .token__time{
        }
        .token__time .el-input{
            width: 100px !important;
        }
        .token__preview{

        }
    </style>
</head>

<body>
<div id="detailOther" class="recruit use-btn" v-cloak>
    <input type="hidden" id="id" value=<?php echo $id; ?>>
    <div class="store_detail">
        <a onclick="changenewtab(this,'<{$Think.lang.基础配置}>')" _href="<{:U('store/detail')}>&id=<?php echo $id; ?>" ><{$Think.lang.基础配置}></a>
        <a onclick="changenewtab(this,'<{$Think.lang.仓库配置}>')" _href="<{:U('store/detail_ware')}>&id=<?php echo $id; ?>"><{$Think.lang.仓库配置}></a>
        <a onclick="changenewtab(this,'<{$Think.lang.物流配置}>')" _href="<{:U('store/detail_logistics')}>&id=<?php echo $id; ?>"><{$Think.lang.物流配置}></a>
        <a class="active"><{$Think.lang.高级配置}></a>
        <a onclick="changenewtab(this,'<{$Think.lang.财务配置}>')" _href="<{:U('store/detail_finance')}>&id=<?php echo $id; ?>">
            <{$Think.lang.财务配置}>
        </a>
        <a onclick="changenewtab(this,'<{$Think.lang.走仓推荐}>')" _href="<{:U('store/detail_warehouse_recommended')}>&id=<?php echo $id; ?>">
            <{$Think.lang.走仓推荐}>
        </a>
        <a onclick="changenewtab(this,'<{$Think.lang.日志信息}>')" _href="<{:U('store/detail_log')}>&id=<?php echo $id; ?>">
            <{$Think.lang.日志信息}>
        </a>


    </div>
    <div style="width: 100%;display: flex;justify-content: flex-end;" >
            <span v-if="isEdit">
                <el-button   type="text" @click="cancel()"   style="height: 28px;line-height: 17px;font-size: 13px;margin-left: 10px;" size="small">取消</el-button>
                <el-button   type="text" @click="save()" style="height: 28px;line-height: 17px;font-size: 13px;" size="small">保存</el-button>
            </span>
        <span v-else>
                <el-button class="btn-pub btn-blue" type="primary" @click="edit()" style="height: 28px;line-height: 17px;font-size: 13px;margin-right: 0px;" size="small">编辑</el-button>
            </span>
    </div>
    <el-form :model="addstore" style="margin-top: 50px;">
        <table class="table-list">
            <thead>
            <tr>
                <th style="border-color: rgb(84, 111, 122);" width="15%;">店铺高级配置</th>
                <th style="border-color: rgb(84, 111, 122);" width="30%;"></th>
                <th style="border-color: rgb(84, 111, 122);" width="15%;"></th>
                <th style="border-color: rgb(84, 111, 122);" width="35%;"></th>
            </tr>
            </thead>
            <tr>
                <td class=" hascolor">Bean Code</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.BEAN_CD" auto-complete="off" placeholder="请填写Bean Code"></el-input>
                </td>
                <td v-else>{{addstore.BEAN_CD}}</td>
                <td class="hascolor">Order Invoke Count</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.orderInvokeCount" auto-complete="off" placeholder="请填写Order Invoke Count"></el-input>
                </td>
                <td v-else>{{addstore.orderInvokeCount}}</td>
            </tr>
            <tr>
                <td class=" hascolor">Last Time</td>
                <td v-if="isEdit" >
                    <el-date-picker style="    width: 469px;" v-model="addstore.LAST_TIME_POINT"  type="datetime" auto-complete="off" placeholder="请填写Last Time"></el-date-picker>
                </td>
                <td v-else>{{addstore.LAST_TIME_POINT}}</td>
                <td class="hascolor">Item Invoke Count</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.itemInvokeCount" auto-complete="off" placeholder="请填写Item Invoke Count"></el-input>
                </td>
                <td v-else>{{addstore.itemInvokeCount}}</td>
            </tr>
            <tr>
                <td class=" hascolor">Cron</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.cron" auto-complete="off" placeholder="请填写Cron"></el-input>
                </td>
                <td v-else>{{addstore.cron}}</td>

                <td class="hascolor">Queue Place holder</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.queuePlaceholder" auto-complete="off" placeholder="请填写Queue Place holder"></el-input>
                </td>
                <td v-else>{{addstore.queuePlaceholder}}</td>
            </tr>
            <tr>
                <td class=" hascolor">Crawler Status</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.CRAWLER_STATUSES" auto-complete="off" placeholder="请填写Crawler Status"></el-input>
                </td>
                <td v-else>{{addstore.CRAWLER_STATUSES}}</td>
                <td class="hascolor">Proxy</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.PROXY" auto-complete="off" placeholder="请填写Proxy"></el-input>
                </td>
                <td v-else>{{addstore.PROXY}}</td>
            </tr>
            <tr>
                <td class="hascolor">Seller ID</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.sellerId" auto-complete="off" placeholder="请填写Seller ID"></el-input>
                </td>
                <td class="text" :title="addstore.sellerId" v-else><span>{{addstore.sellerId}}</span></td>

                <td class="hascolor">Access Token</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.accessToken" auto-complete="off" placeholder="请填写Access Token"></el-input>
                </td>
                <td class="text" :title="addstore.accessToken" v-else><span>{{addstore.accessToken}}</span></td>
            </tr>
            <tr>
                <td class="hascolor">Refresh Token</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.refresh_token" auto-complete="off" placeholder="请填写Refresh Token"></el-input>
                </td>
                <td class="text" :title="addstore.refresh_token" v-else><span>{{addstore.refresh_token}}</span></td>

                <td class="hascolor">App Secret</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.appSecret" auto-complete="off" placeholder="请填写App Secret"></el-input>
                </td>
                <td class="text" :title="addstore.appSecret" v-else><span>{{addstore.appSecret}}</span></td>

            </tr>
            <tr>
                <td class="hascolor">Client ID</td>
                <td v-if="isEdit">
                    <el-input v-model="addstore.clientId" auto-complete="off" placeholder="请填写Client ID"></el-input>
                </td>
                <td class="text" :title="addstore.clientId" v-else><span>{{addstore.clientId}}</span></td>

                <td class="hascolor">拉单开关</td>
                <td v-if="isEdit">
                    <el-switch  v-model="addstore.ORDER_SWITCH"></el-switch>
                </td>
                <td v-else>
                    <el-switch  disabled  v-model="addstore.ORDER_SWITCH"></el-switch>
                    <span v-if="addstore.ORDER_SWITCH=='1'">开</span>
                    <span v-else>关</span>
                </td>
            </tr>
            <tr>
                <td>
                    <?php if (checkPermissions('api', 'isAutoDelivery')) { ?>
                    自动标记发货
                    <?php } ?>
                </td>
                <td>
                    <?php if (checkPermissions('api', 'isAutoDelivery')) { ?>
                    <el-switch :disabled="isDisabledAutoDevliery" v-model="addstore.isAutoDevliery" @change="onActivatedAutoDevliery"></el-switch>
                    <span v-if="addstore.isAutoDevliery">开</span>
                    <span v-else>关</span>
                    <?php } ?>
                </td>

                <td class="hascolor"></td>
                <td class="text"></td>
            </tr>
        </table>
        <table class="table-list" style="margin-top:30px;">
            <thead>
            <tr>
                <th style="border-color: rgb(84, 111, 122);text-align: left;padding-left: 10px;" colspan="4">店铺重新获取订单</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td style="width: 150px;">时间区间</td>
                <td colspan="2">
                    <!-- <el-date-picker v-model="startDate" value-format="yyyy-MM-dd" type="date" placeholder="开始日期" > </el-date-picker>
                    <span style="margin:0 10px;">至</span>
                    <el-date-picker v-model="endDate" value-format="yyyy-MM-dd" type="date" placeholder="结束日期" disabled> </el-date-picker> -->
                    <div class="temporal__interval">
                        <el-date-picker
                            v-model="startAndEndDate"
                            @change="onDateChanged"
                            type="datetimerange"
                            :start-placeholder="$lang('开始日期')"
                            :range-separator="$lang('至')"
                            :end-placeholder="$lang('结束日期')"
                            value-format="yyyy-MM-dd HH:mm:ss"
                            :default-time="['00:00:00', '23:59:59']">
                        </el-date-picker>
                        <span class="temporal__intervalj-message">
                      <span class="temporal__interval-text" style="margin-left:10px;">该时间区间内订单有新增或状态更新都会被获取</span>
                      <el-popover
                          placement="top-start"
                          title="注意："
                          width="200"
                          trigger="hover"
                          content="现在手动拉单是没有分片机制的，使用人员在执行的时候要注意对应店铺的订单量，以防拉取过多订单数据影响原有的拉单操作。同时如果前后间隔是两小时以内是会按照修改时间拉单，两小时外是按照创建时间拉单。">
                      <i class="el-icon-question" slot="reference"></i>
                    </el-popover>
                   </span>
                    </div>
                </td>
                <td style="width: 150px;">
                    <el-button type="primary" @click="action">执行</el-button>
                </td>
            </tr>
            <tr>
                <td style="width: 150px;">自动刷新token</td>
                <td colspan="2">
                    <!-- <el-date-picker v-model="startDate" value-format="yyyy-MM-dd" type="date" placeholder="开始日期" > </el-date-picker>
                    <span style="margin:0 10px;">至</span>
                    <el-date-picker v-model="endDate" value-format="yyyy-MM-dd" type="date" placeholder="结束日期" disabled> </el-date-picker> -->
                    <div class="token">
                        <div class="token__time">
                     <span>
                         自动更新token的周期为
                     </span>
                            <el-input type="number" :disabled="isDisabled" v-model="automaticUpdateDays"></el-input>
                            <span>天</span>

                            <el-input type="number"  :disabled="isDisabled" v-model="automaticUpdateTime"></el-input>
                            <span>时</span>

                            <el-input  type="number"  :disabled="isDisabled" v-model="automaticUpdateMinute"></el-input>
                            <span>分</span>

                            <el-input  type="number" :disabled="isDisabled" v-model="automaticUpdateSecond"></el-input>
                            <span>秒</span>。
                        </div>
                        <div class="token__preview">
                            <span>下次更新token的时间为：{{formattedTimeDate}}</span>
                        </div>
                    </div>

                </td>
                <td style="width: 150px;">
                    <el-button v-if="isEditState" :disabled="isRefreshToken" type="primary" @click="onEditToken">编辑</el-button>

                    <el-button v-if="!isEditState" type="primary" @click="onSaveToken">保存</el-button>
                    <el-button v-if="!isEditState" type="primary" @click="onClose">取消</el-button>

                    <el-button v-if="isEditState" :disabled="isRefreshToken" type="primary" @click="onAction">立即执行</el-button>
                </td>
            </tr>
            </tbody>
        </table>
    </el-form>
</div>
</body>
<!--引入js-->
<script type="text/javascript" src="../Public/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../Public/js/H-ui.js"></script>
<script type="text/javascript" src="../Public/js/H-ui.admin.js?<{$Think.config.VER_NUM}>"></script>
<script type="text/javascript" src="../Public/js/vue.2.5.13.js"></script>
<script type="text/javascript" src="../Public/js/axios.min.js"></script>
<script type="text/javascript" src="../Public/js/element-ui-2.2.js"></script>
<script type="text/javascript" src="../Public/js/moment.js"></script>

<script type="text/javascript">
    var detailOther = new Vue({
        el: '#detailOther',
        data: {
            id:'',
            //新增店铺开关
            isEdit: false,
            isAdd:false,
            isDisabledAutoDevliery:true,
            isEditState:true,
            mintime:0,
            maxtime:59,
            //修改店铺
            addstore: {
                BEAN_CD:'',
                orderInvokeCount:'',
                LAST_TIME_POINT:'',
                itemInvokeCount:'',
                cron:'',
                queuePlaceholder:'',
                CRAWLER_STATUSES:'',
                PROXY:'',
                sellerId:'',
                accessToken:'',
                appSecret:'',
                clientId:'',
                ORDER_SWITCH:false,
                isAutoDevliery:false
            },
            STORE_PLAT: [], //所有平台数据
            SALE_TEAM: [], //所有销售团队
            COUNTRY: [], //国家
            operation: '',
            isclick: false,
            wareCount:100,
            form: {
                SEARCH_VAL: '',
                SEARCH_TYPE: '',
                COUNTRY: '',
                STORE_PLAT: '', //平台编码
                SALE_TEAM: '', //销售团队编码
                STATUS: '', //授权状态
            },
            pickerOptions: {

            },
            startDate: "",
            endDate:  "",
            startAndEndDate:null,
            sheet:  "",
            automaticUpdateDays:0,
            automaticUpdateTime:0,
            automaticUpdateMinute:0,
            automaticUpdateSecond:0,
            formattedTimeDate:null,
            currentlySetTimeStamp:null,
            isDisabled:true,
            isRefreshToken:true,
            pickerOptions:{

            }
        },
        created: function() {
            var _this = this;
            this.search();
            var date =  new Date();
            date.setMonth(date.getMonth() - 3);
            this.pickerOptions.disabledDate = function (time) {
                return time.getTime() < date.getTime() || time.getTime() > Date.now()
            }
        },
        watch:{
            startDate:{
                handler:function(newVal,oldVal){
                    var date = new Date(newVal);
                    date.setDate(date.getDate() + 1);
                    this.endDate = date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();
                }
            },
            automaticUpdateDays:function (val, oldVal) {
                if(!val){
                    val = 0;
                }

                if(oldVal!=0 || oldVal!=""){
                    axios.post("/index.php?m=api&a=store_getNextDate",{
                        ID:this.addstore.ID,
                        d:parseInt(val) ,
                        h:parseInt(this.automaticUpdateTime),
                        m:parseInt(this.automaticUpdateMinute),
                        s:parseInt(this.automaticUpdateSecond)
                    }).then((res)=>{
                        this.formattedTimeDate = res.data.data.nextDate
                    })
                }

            },
            automaticUpdateTime:function (val, oldVal) {
                if(!val){
                    val = 0;
                }
                if(oldVal!=0 || oldVal!="") {
                    axios.post("/index.php?m=api&a=store_getNextDate",{
                        ID:this.addstore.ID,
                        d:parseInt(this.automaticUpdateDays) ,
                        h:parseInt(val),
                        m:parseInt(this.automaticUpdateMinute),
                        s:parseInt(this.automaticUpdateSecond)
                    }).then((res)=>{
                        this.formattedTimeDate = res.data.data.nextDate
                    })
                }

            },
            automaticUpdateMinute:function (val, oldVal) {
                if(!val){
                    val = 0;
                }
                if(oldVal!=0 || oldVal!="") {
                    axios.post("/index.php?m=api&a=store_getNextDate",{
                        ID:this.addstore.ID,
                        d:parseInt(this.automaticUpdateDays) ,
                        h:parseInt(this.automaticUpdateTime),
                        m:parseInt(val),
                        s:parseInt(this.automaticUpdateSecond)
                    }).then((res)=>{
                        this.formattedTimeDate = res.data.data.nextDate
                    })
                }

            },
            automaticUpdateSecond:function (val, oldVal) {
                if(!val){
                    val = 0;
                }

                if(oldVal!=0 || oldVal!="") {
                    axios.post("/index.php?m=api&a=store_getNextDate",{
                        ID:this.addstore.ID,
                        d:parseInt(this.automaticUpdateDays) ,
                        h:parseInt(this.automaticUpdateTime),
                        m:parseInt(this.automaticUpdateMinute),
                        s:parseInt(val)
                    }).then((res)=>{
                        this.formattedTimeDate = res.data.data.nextDate
                    })
                }

            }
        },
        methods: {
            search() {
                var id = $("#id").val();
                axios.post("/index.php?m=api&a=store_getOtherData&id="+id)
                    .then((res)=> {
                        if (res.data.code === 200) {

                            detailOther.addstore = res.data.data;

                            detailOther.addstore.isAutoDevliery === "0" ?detailOther.addstore.isAutoDevliery=false:detailOther.addstore.isAutoDevliery=true;

                            if (detailOther.addstore.ORDER_SWITCH==='1') {
                                detailOther.addstore.ORDER_SWITCH = true;
                            }
                            this.getRefreshTokenTime();
                        }
                    })
            },
            onEditToken(){
                this.isEditState = false;
                this.isDisabled = false;
            },
            getRefreshTokenTime(){
                let id = $("#id").val();
                axios.get("/index.php?m=api&a=store_getAutoTokenData&id="+id).then((res)=>{
                    if(res.data.code===200){
                        this.formattedTimeDate = res.data.data.token_update_time;
                        this.automaticUpdateDays = res.data.data.d;
                        this.automaticUpdateTime = res.data.data.h;
                        this.automaticUpdateMinute = res.data.data.m;
                        this.automaticUpdateSecond = res.data.data.s;

                        if(this.addstore.refresh_token){ //refresh_token有值才能操作对应的编辑按钮
                            this.isRefreshToken = false;
                        } else {
                            this.isRefreshToken = true;
                        }
                    }else {
                        detailOther.$message({
                            message:this.$lang("接口调用失败"),
                            type: 'error',
                        });
                    }

                }).catch(()=>{
                    detailOther.$message({
                        message:this.$lang("接口调用失败"),
                        type: 'error',
                    });
                })
            },
            onSaveToken(){
                if(this.automaticUpdateTime>24){
                    detailOther.$message({
                        message:this.$lang("时不可以大于24"),
                        type: 'error',
                    });
                    return
                }
                if(this.automaticUpdateMinute>59){
                    detailOther.$message({
                        message:this.$lang("分不可以大于59"),
                        type: 'error',
                    });
                    return
                }
                if(this.automaticUpdateSecond>59){
                    detailOther.$message({
                        message:this.$lang("秒不可以大于59"),
                        type: 'error',
                    });
                    return
                }
                axios.post("/index.php?m=api&a=store_editAutoTokenData",{
                    ID:this.addstore.ID,
                    d:parseInt(this.automaticUpdateDays) ,
                    h:parseInt(this.automaticUpdateTime),
                    m:parseInt(this.automaticUpdateMinute),
                    s:parseInt(this.automaticUpdateSecond),
                    token_update_time:this.formattedTimeDate
                }).then((res)=>{
                    if(res.data.code===200){
                        this.isDisabled = true;
                        this.isEditState = true;
                        detailOther.$message({
                            message:this.$lang("编辑成功"),
                            type: 'success',
                        });
                    }else {
                        detailOther.$message({
                            message:this.$lang(res.data.msg),
                            type: 'error',
                        });
                    }
                })
            },
            onAction(){
                this.$confirm("你确定要立即执行自动刷新token吗", "提示").then(()=>{
                    axios.post("/index.php?m=api&a=store_refreshToken",{
                        id:this.addstore.ID
                    }).then((res)=>{
                        console.log("立即执行",res);
                        if(res.data.code===200){
                            detailOther.$message({
                                message: this.$lang('执行成功'),
                                type: 'success',
                            });
                            let id = $("#id").val();
                            location.href = "/index.php?m=store&a=detail_other&id="+id;
                        }else {
                            detailOther.$message({
                                message:this.$lang(res.data.msg),
                                type: 'error',
                            });
                        }

                    })
                })

            },
            onClose(){
                this.isEditState = true;
                this.automaticUpdateDays = 0;
                this.automaticUpdateTime = 0;
                this.automaticUpdateMinute = 0;
                this.automaticUpdateSecond = 0;
                this.isDisabled =true;
            },
            save:function(){
                var id = $("#id").val();
                let addstore =$.extend(true, {}, this.addstore)

                addstore.BEAN_CD = $.trim(addstore.BEAN_CD);
                addstore.orderInvokeCount = $.trim(addstore.orderInvokeCount);
                addstore.itemInvokeCount = $.trim(addstore.itemInvokeCount);
                addstore.cron = $.trim(addstore.cron);
                addstore.queuePlaceholder = $.trim(addstore.queuePlaceholder);
                addstore.CRAWLER_STATUSES = $.trim(addstore.CRAWLER_STATUSES);
                addstore.PROXY = $.trim(addstore.PROXY);
                addstore.sellerId = $.trim(addstore.sellerId);
                addstore.accessToken = $.trim(addstore.accessToken);
                addstore.refresh_token = $.trim(addstore.refresh_token);
                addstore.appSecret = $.trim(addstore.appSecret);
                addstore.clientId = $.trim(addstore.clientId);
                addstore.isAutoDevliery === false ?addstore.isAutoDevliery="0":addstore.isAutoDevliery="1";

                var otherData = this.addstore;

                axios.post("/index.php?m=api&a=store_editOtherData",{otherData:otherData})
                    .then(function(res){
                        if (res.data.code===200) {
                            location.href = "/index.php?m=store&a=detail_other&id="+id;
                            detailOther.$message({
                                message: '修改成功',
                                type: 'success',
                            });
                        }
                    })
            },
            cancel:function(){
                var id = $("#id").val();
                //this.isEdit = !this.isEdit;
                location.href = "/index.php?m=store&a=detail_other&id="+id
            },
            edit:function(){
                this.isEdit = !this.isEdit;
                this.isDisabledAutoDevliery=!this.isDisabledAutoDevliery;
            },
            action:function(){
                var _this = this;
                console.log("日期",this.startAndEndDate);
                if(!this.startAndEndDate){
                    this.$message.warning("请选择拉单时间区间");
                    return false;
                }else{
                    this.$confirm('部分平台拉单存在每日额度限制，手动执行前请确认是否会消耗过多的额度影响系统正常运行，谢谢配合！', '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'warning'
                    }).then(() => {
                        axios.post('/index.php?m=Store&a=pullSingle',
                            {
                                stores: $("#id").val(),
                                startDate: this.startAndEndDate[0],
                                endDate: this.startAndEndDate[1],
                                sheet: this.sheet,
                            }, {
                                headers: {
                                    'X-Requested-With':'XMLHttpRequest'
                                }
                            })
                            .then(function(res){
                                if(res.data.code == 2000){
                                    _this.$message.success("执行成功");
                                }else{
                                    _this.$message.error(res.data.msg);
                                }
                            })
                    }).catch(() => {
                        _this.$message.warning('取消执行');
                    });
                }

            },
            onActivatedAutoDevliery(){
                if(this.addstore.isAutoDevliery){
                    this.$message({
                        message: '开启后将在第一次出现运单号的时候自动标记发货',
                        type: 'success',
                    })
                }
            },
            onDateChanged(dateValue){
                console.log("日期值",dateValue);
            }
        },

    })
</script>
</html>
<script>
    import ElInput from "../../Guds/Public/js/vendor";
    export default {
        components: {ElInput}
    }
</script>