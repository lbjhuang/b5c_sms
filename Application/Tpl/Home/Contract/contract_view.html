<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="renderer" content="webkit|ie-comp|ie-stand">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <title>法律合同审批详情</title>

  <link rel="stylesheet" href="./Application/Tpl/Home/Public/css/element-ui-2.2.css?v=<{$Think.config.VER_NUM}>">
  <link rel="stylesheet"
        href="./Application/Tpl/Home/Public/css/default.css?v=<{$Think.config.VER_NUM}>?v=<{$Think.config.VER_NUM}>">

  <style>
      html {
          /*height: 100vh;*/
      }

      #main {
          height: 100%;
          padding-top: 15px;

      }

      .edit__actions {
          display: flex;
          justify-content: center;
          padding: 20px 0px;
      }

      .button--save {
          width: 54px;
          height: 30px;
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .contract__table {
          width: 100%;
          empty-cells: show;
          background-color: transparent;
          border-collapse: collapse;
          border-spacing: 0;
      }

      .el-form-item {
          margin-bottom: 0 !important;
      }

      .contract__table-header {
          height: 38px;
          text-align: left !important;
          width: 100%;
          line-height: 38px;
          font-size: 16px;
          color: #FFFFFF !important;
          background: #546E7A !important;
          padding: 0px !important;
          text-indent: 20px;
      }

      .contract__table .contract__table-tbody td {
          font-size: 13px;
          color: #263238;
          letter-spacing: 0;
          border-bottom: 1px solid #ECEFF1;
          border-top: 1px solid #ECEFF1;
          border-left: 1px solid #CADEE7;
          border-right: 1px solid #CADEE7;
          padding: 0.65rem;
      }

      .contract__table .contract__table-tbody tr td:nth-child(odd) {
          background: #F7F9FB;
          color: #546E7A;
          letter-spacing: 0;
          text-align: center;
          width: 10%;
      }

      .contract__table-required-filed {
          color: #546E7A;
      }

      .archived__information-form {
          margin-top: 20px;
      }

      .seal {
          display: flex;
          justify-content: space-between;
      }

      .seal__right {

      }

      .finalize__contract-form-item {
          margin-bottom: 20px !important;
      }

      .finalize__contract {
          display: flex;
          align-items: center;
      }

      .finalize__contract .upload-demo {
          margin-left: 20px;
          display: flex;
      }

      .finalize__contract-seal {
          display: flex;
          justify-content: space-between;
          align-items: center;
      }

      .finalize__contract-left {
          display: flex;
          align-items: center;
      }

      .finalize__contract-right {

      }

      .el-icon-plus {
          font-weight: bold;
          margin-left: 20px;
          font-size: 18px;
      }

      .el-upload__tip {
          color: #dddddd;
          margin-bottom: 10px;
      }

      .el-icon-minus {
          font-weight: bold;
          margin-left: 20px;
          font-size: 18px;
      }

      .approval__form {
          margin-top: 30px;
      }

      .button--save {
          width: auto !important;
          height: 40px;
      }

      .turn__people-el-dialog .el-form-item__error {
          left: 134px !important;
      }

      .actions {
          display: flex;
          justify-content: center;
          margin-top: 20px;
      }

      .turn__people-dialog {
          display: flex;
          justify-content: center;
      }

      .turn__people-dialog span {
          color: #546E7A;
      }

      .turn__people-dialog .el-autocomplete {
          width: 300px;
          margin-left: 20px;
      }

      .tab_detail {
          padding: 20px;
      }

      .tab_detail .active {
          opacity: 1;
      }

      .tab_detail a {
          cursor: pointer;
          font-weight: bold;
          opacity: 0.5;
          margin-right: 30px;
      }

      .log_header {
          font-size: 16px;
          line-height: 40px;
          height: 40px;
          margin-top: 20px;
          padding-left: 20px;
          text-align: left;
          letter-spacing: 0;
          color: rgb(255, 255, 255);
          background: rgb(84, 110, 122);
      }

      .el-table__header-wrapper th {
          color: rgb(86, 111, 123);
          background: rgb(246, 249, 250);
      }
  </style>
  <style>
      .flow {
          display: flex;
          align-items: center;
          font-size: 12px;
      }

      .flow__start {
          width: 80px;
          height: 40px;
          border: 1px solid #3D64AC;
          border-radius: 10px;
          background: #3D64AC;
          color: #ffffff;
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .flow__arrows {
          width: 60px;
          height: 40px;
      }

      .flow__arrows img {
          width: 100%;
          max-height: 100%;
      }

      .flow__content {
          width: 120px;
          height: 60px;
          border: 1px solid #4672C4;
          border-radius: 10px;
          background: #4672C4;
          color: #ffffff;
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .flow__end {
          width: 80px;
          height: 40px;
          border: 1px solid #3D64AC;
          border-radius: 10px;
          background: #3D64AC;
          color: #ffffff;
          display: flex;
          justify-content: center;
          align-items: center;
      }

      .sync {

      }

      .sync__content {
          margin-bottom: 10px;
      }

      .sync__content span {
          margin: 0 !important;
      }

      .isActive {
          border: 1px solid yellowgreen !important;
          background: yellowgreen;
      }
      .getTrademarkInfoTable{
        margin-top: 20px;
        border-left: 1px solid #ddd;
      }
      .getTrademarkInfoTable .el-table__header th{
        background-color: rgb(84 110 122);
        color: #fff;
      }
      .getTrademarkInfoTable .el-table__body td{
        border-right: 1px solid #ddd;
      }
  </style>
</head>
<body id="content">

<div id="main">
  <div class="edit">
    <div class="edit__fields">
      <!--      <div class="tab_detail">-->
      <!--        <a class="active"><{$Think.lang.合同详情}></a>-->
      <!--        <a id="contractDetailId" @click="onLogDetail"><{$Think.lang.日志信息}></a>-->
      <!--      </div>-->
      <el-tabs v-model="activeName">
        <el-tab-pane :label="$lang('合同详情')" name="new">
          <el-form
              :model="contract"
              ref="form"
          >
            <table class="contract__table">
              <caption class="contract__table-header">{{$lang('基本信息')}}</caption>
              <tbody class="contract__table-tbody">
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('签约人*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CONTRACTOR"
                      :rules="[{ required: true, message: $lang('请输入签约人'), trigger: 'blur' }]">
                    <el-autocomplete
                        :placeholder="$lang('请输入英文名')"
                        class="contractor"
                        :disabled="isDisabled"
                        class="inline-input"
                        :fetch-suggestions="onLenovoQuery"
                        v-model="contract.CONTRACTOR"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同编号*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_NO"
                      :rules="[{ required: true, message: $lang('请输入合同编号'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.CON_NO"
                        disabled
                        resize="none"
                        :placeholder="$lang('请输入合同编号')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('我方公司*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_COMPANY_CD"
                      :rules="[{ required: true, message: $lang('请选择我方公司'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.CON_COMPANY_CD" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(value,key) in ourCompany"
                          :key="key"
                          :label="value"
                          :value="key">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
                <td>
                  {{$lang('我方公司2')}}
                </td>
                <td>
                  <el-form-item
                      prop="CON_COMPANY_SEC"
                      :rules="[{ required: false, message: $lang('请选择我方公司2'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.CON_COMPANY_SEC" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(value,key) in ourCompany"
                          :key="key"
                          :label="value"
                          :value="key">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed"> {{$lang('对方公司ID*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="supplier_id"
                      :rules="[{ required: true, message:  $lang('请输入对方公司ID'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        :placeholder="$lang('请输入对方公司ID')"
                        resize="none"
                        v-model="contract.supplier_id"
                    >
                      <el-button slot="append" icon="el-icon-search" @click="onCheckID(true)"></el-button>
                    </el-input>
                  </el-form-item>
                </td>
                <td>
                  {{$lang('对方公司名称')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方公司名称'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_NAME"
                        disabled
                        resize="none"
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>

                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('对方公司简称')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方公司简称'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_RES_NAME"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('对方公司英文名称')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方公司英文名称'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_NAME_EN"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('对方公司英文简称')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方公司英文简称'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_RES_NAME_EN"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('对方营业执照/个人证件')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方营业执照/个人证件'), trigger: 'blur' }]">
                    <el-button v-if="contract.SP_ANNEX_NAME" icon="el-icon-download"
                               @click="onDownload(contract.supplier_id,contract.DATA_MARKING,'0',contract.SP_ANNEX_NAME)">
                      {{$lang('下载主体营业执照')}}
                    </el-button>
                    <span v-else="contract.SP_ANNEX_NAME" style="color: #C0C4CC">{{$lang('未上传主体营业执照')}}</span>

                    <el-button v-if="contract.SP_ANNEX_NAME2" icon="el-icon-download"
                               @click="onDownload(contract.supplier_id,contract.DATA_MARKING,'1',contract.SP_ANNEX_NAME2)"
                               style="margin-left: 20px">
                      {{$lang('下载关联公司营业执照')}}
                    </el-button>
                    <span v-else="contract.SP_ANNEX_NAME2"
                          style="margin-left: 20px;color: #C0C4CC">{{$lang('未上传关联公司营业执照')}}</span>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('对方营业执照号/个人证件号')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入对方营业执照号/个人证件号'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_CHARTER_NO"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('企业类型')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入企业类型'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.COPANY_TYPE_CD_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('年业务规模')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入年业务规模'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_YEAR_SCALE_CD_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('采购团队')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入采购团队'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_TEAM_CD_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('销售团队')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入销售团队'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SALE_TEAM_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('介绍团队')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入介绍团队'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_JS_TEAM_CD_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('办公地址')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入办公地址'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.office_address"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('注册地址')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入注册地址'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.register_address"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('详细地址')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入详细地址'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.COMPANY_ADDR_INFO"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('公司与市场地位简述')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入公司与市场地位简述'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.COMPANY_MARKET_INFO"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('备注')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入备注'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.SP_REMARK"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  {{$lang('合作评级')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入合作评级'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.cooperative_rating_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('风险评级')}}
                </td>
                <td>
                  <el-form-item
                      :rules="[{ required: false, message: $lang('请输入风险评级'), trigger: 'blur' }]">
                    <el-input
                        v-model="contract.RISK_RATING_val"
                        disabled
                        :placeholder="$lang('系统自动填充')"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同类型*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CONTRACT_TYPE"
                      :rules="[{ required: true, message: $lang('请选择合同类型'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.CONTRACT_TYPE" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(item,index) in conDateType"
                          :key="index"
                          :label="item"
                          :value="index">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同简称*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_NAME"
                      :rules="[{ required: true, message: $lang('请输入合同简称'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入合同简称')"
                        v-model="contract.CON_NAME"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合作类型*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_TYPE"
                      :rules="[{ required: true, message: $lang('请输入合作类型'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.CON_TYPE" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(item,index) in conType"
                          :key="index"
                          :label="item"
                          :value="index">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同描述*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="desc"
                      :rules="[{ required: true, message: $lang('请输入合同描述'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入合同描述')"
                        v-model="contract.desc"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同状态*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_STAT"
                      :rules="[{ required: true, message: $lang('请选择合同状态'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.CON_STAT" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(value,key) in contractState"
                          :key="key"
                          :label="value"
                          :value="key">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('是否自动续约*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="IS_RENEWAL"
                      :rules="[{ required: true, message: $lang('请输入是否自动续约'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.IS_RENEWAL" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(item,index) in isAutoRenew"
                          :key="index"
                          :label="item"
                          :value="index">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同开始日期*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="START_TIME"
                      :rules="[{ required: true, message: $lang('请输入合同开始日期'), trigger: 'blur' }]">
                    <el-date-picker
                        :disabled="isDisabled"
                        value-format="yyyy-MM-dd"
                        v-model="contract.START_TIME"
                        :picker-options="startDatePickerOptions"
                        type="date"
                        placeholder="选择日期">
                    </el-date-picker>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同结束日期*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="END_TIME"
                      :rules="[{ required: true, message: $lang('请输入合同结束日期'), trigger: 'blur' }]">
                    <el-date-picker
                        :disabled="isDisabled"
                        value-format="yyyy-MM-dd"
                        v-model="contract.END_TIME"
                        :picker-options="endDatePickerOptions"
                        type="date"
                        placeholder="选择日期">
                    </el-date-picker>
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方开户行*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="SP_BANK_CD"
                      :rules="[{ required: true, message: $lang('请输入对方开户行'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方开户行')"
                        v-model="contract.SP_BANK_CD"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方银行账户*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="collection_account_name"
                      :rules="[{ required: true, message: $lang('请输入对方银行账户'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方银行账户')"
                        v-model="contract.collection_account_name"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方银行账号*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="BANK_ACCOUNT"
                      :rules="[{ required: true, message: $lang('请输入对方银行账号'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方银行账号')"
                        v-model="contract.BANK_ACCOUNT"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方SWIFT CODE*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="SWIFT_CODE"
                      :rules="[{ required: true, message: $lang('请输入对方SWIFT CODE'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方SWIFT CODE')"
                        v-model="contract.SWIFT_CODE"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方联系人*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CONTACT"
                      :rules="[{ required: true, message: $lang('请输入对方联系人'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方联系人')"
                        v-model="contract.CONTACT"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方电子邮箱*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="CON_EMAIL"
                      :rules="[{ required: true, message: $lang('请输入对方电子邮箱'), trigger: 'blur' }, { validator: emailValidate, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方电子邮箱')"
                        v-model="contract.CON_EMAIL"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方联系电话*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="BAK_CON_PHONE"
                      :rules="[{ required: true, message: $lang('请输入对方联系电话'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方联系电话')"
                        v-model="contract.BAK_CON_PHONE"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('对方座机号码*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="BAK_CON_TEL"
                      :rules="[{ required: true, message: $lang('请输入对方座机号码'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入对方座机号码')"
                        v-model="contract.BAK_CON_TEL"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('合同总金额*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="amount"
                      :rules="[{ required: true, message: $lang('请输入合同总金额'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入合同总金额')"
                        v-model="contract.amount"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('发票类型*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="invoice_type_cd"
                      :rules="[{ required: true, message: $lang('请选择发票类型'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.invoice_type_cd" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(value,key) in invoiceType"
                          :key="key"
                          :label="value"
                          :value="key">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('货币单位*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="currency_cd"
                      :rules="[{ required: true, message: $lang('请选择货币单位'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.currency_cd" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(value,key) in currencyExtend"
                          :key="key"
                          :label="value"
                          :value="key">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  <span class="contract__table-required-filed">{{$lang('付款方式与周期*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="pay_content"
                      :rules="[{ required: true, message: $lang('请输入付款方式与周期'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入付款方式与周期')"
                        v-model="contract.pay_content"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('是否含税*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="have_tax"
                      :rules="[{ required: true, message: $lang('请选择是否含税'), trigger: 'change' }]">
                    <el-select :disabled="isDisabled" v-model="contract.have_tax" :placeholder="$lang('请选择')">
                      <el-option
                          v-for="(item,index) in tax"
                          :key="index"
                          :label="item"
                          :value="index">
                      </el-option>
                    </el-select>
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <td>
                  {{$lang('费用分配（快递费等）')}}
                </td>
                <td>
                  <el-form-item
                      prop="distribution"
                      :rules="[{ required: false, message: $lang('请输入费用分配（快递费等）'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入费用分配（快递费等）')"
                        v-model="contract.distribution"
                    />
                  </el-form-item>
                </td>
                <td>
                  <span class="contract__table-required-filed">{{$lang('其他（重大不利条款等）*')}}</span>
                </td>
                <td>
                  <el-form-item
                      prop="other"
                      :rules="[{ required: true, message: $lang('请输入其他（重大不利条款等）'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                    <el-input
                        :disabled="isDisabled"
                        resize="none"
                        :placeholder="$lang('请输入其他（重大不利条款等）')"
                        v-model="contract.other"
                    />
                  </el-form-item>
                </td>
              </tr>
              <tr>
                <!--在处于草稿状态时-->
                <td v-if="contract.audit_status_cd==='N003660001'">
                  <span class="contract__table-required-filed">{{$lang('初稿合同文件*')}}</span>
                </td>
                <td v-if="contract.audit_status_cd==='N003660001'">
                  <div slot="tip" class="el-upload__tip">{{$lang('上传的文件不能超过50MB')}}</div>
                  <template v-for="(item,index) in contract.finalizeContract">
                    <el-form-item
                        class="finalize__contract-form-item"
                        :prop="'finalizeContract.' + index + '.contract_agreement'"
                        :rules="[{ required: true, message: $lang('请选择'), trigger: 'change' }]">
                      <div class="finalize__contract">
                        <el-select :disabled="isDisabled" v-model="item.contract_agreement" :placeholder="$lang('请选择')">
                          <el-option
                              v-for="(value,key) in contractAgreement"
                              :key="key"
                              :label="value"
                              :value="key">
                          </el-option>
                        </el-select>
                        <el-upload
                            :disabled="isDisabled"
                            class="upload-demo"
                            ref="upload"
                            action=""
                            :on-remove="onRemove"
                            :before-remove="onBeforeRemove"
                            :on-change="onUploadChange"
                            :file-list="fileList[index]"
                            :auto-upload="false"
                            multiple
                            :limit="2">
                          <el-button size="small" type="primary" :disabled="isDisabled" @click="onUpload(index)">
                            {{$lang('点击上传')}}
                          </el-button>
                        </el-upload>
                        <div class="finalize__contract-actions">
                          <i v-if="contract.finalizeContract.length===1 || index===(contract.finalizeContract.length-1)"
                             class="el-icon-plus" @click="onAdd"></i>
                          <i v-if="contract.finalizeContract.length>1" class="el-icon-minus"
                             @click="onMinus(index)"></i>
                        </div>
                      </div>
                    </el-form-item>
                  </template>
                </td>

                <!--            合同处于非草稿状态时-->
                <td v-if="contract.audit_status_cd!=='N003660001'">
                  <span class="contract__table-required-filed">{{$lang('初稿合同文件链接*')}}</span>
                </td>
                <td v-if="contract.audit_status_cd!=='N003660001'">
                  <template v-for="(item,index) in finalizeContractLinks">
                    <template v-for="(value,key) in contractAgreement">
                      <span v-if="item.contract_agreement===key" style="margin-left: 10px">{{value}}:</span>
                    </template>
                    <span :key="index"
                          @click="onFinalizeContractDownload(item)"
                          style="margin-right: 5px;color: #00B4FF;cursor: pointer">{{item.upload_name}}</span>
                  </template>
                </td>

                <td v-if="contract.CONTRACT_TYPE == 11">
                  <span class="contract__table-required-filed">{{$lang('关联商标编号*')}}</span>
                </td>
                <td v-if="contract.CONTRACT_TYPE == 11">
                  <el-form-item
                      prop="trademark_no"
                      :rules="[{ required: true, message: $lang('请输入商标编号'), trigger: 'blur' },{ validator: contentIsSpace, trigger: 'blur' }]">
                      <el-input
                      @blur="trademarkNumberBlur(contract.trademark_no)"
                      :disabled="isDisabled"
                      resize="none"
                      :placeholder="$lang('请输入商标编号')"
                      v-model="contract.trademark_no"
                />
                  </el-form-item>
                  
                </td>

              </tr>
              <tr>
                <td v-if="contract.audit_status_cd==='N003660003'">
                  <span class="contract__table-required-filed">{{$lang('法务上传待盖章确认文件*')}}</span>
                </td>
                <td v-if="contract.audit_status_cd==='N003660003'">
                  <div v-if="isVisableLegalUpload">
                    <div slot="tip" class="el-upload__tip">{{$lang('上传的文件不能超过50MB')}}</div>
                    <template v-for="(item,index) in contract.legalFinalizeContract">
                      <el-form-item
                          :key="index"
                          class="finalize__contract-form-item"
                          :prop="'legalFinalizeContract.' + index + '.contract_agreement'"
                          :rules="[{ required: true, message: $lang('请选择'), trigger: 'change' }]">
                        <div class="finalize__contract">
                          <el-select v-model="item.contract_agreement" :placeholder="$lang('请选择')">
                            <el-option
                                v-for="(value,key) in contractAgreement"
                                :key="key"
                                :label="value"
                                :value="key">
                            </el-option>
                          </el-select>
                          <el-upload
                              class="upload-demo"
                              ref="upload"
                              action=""
                              :on-change="onUploadChangeByLegalFinalizedContract"
                              :auto-upload="false"
                              :file-list="fileListByLegalFinalizedContract[index]"
                              multiple
                              :limit="2">
                            <el-button size="small" type="primary" @click="onUploadByLegalFinalizedContract(index)">
                              {{$lang('点击上传')}}
                            </el-button>
                          </el-upload>
                          <div class="finalize__contract-actions">
                            <i v-if="contract.legalFinalizeContract.length===1 || index===(contract.legalFinalizeContract.length-1)"
                               class="el-icon-plus" @click="onAddByLegalFinalizedContract"></i>
                            <i v-if="contract.legalFinalizeContract.length>1" class="el-icon-minus"
                               @click="onMinusByLegalFinalizedContract(index)"></i>
                          </div>
                        </div>
                      </el-form-item>
                    </template>
                  </div>

                  <div class="sync">
                    <div class="sync__content">
                      <template v-for="(item,index) in legalFinalizeContractBySync">
                        <template v-for="(value,key) in contractAgreement">
                          <span v-if="item.contract_agreement===key" style="margin-left: 10px">{{value}}:</span>
                        </template>
<!--                        <a :key="index"-->
<!--                           :href=`/index.php?m=supplier&a=contract_download&ID=${contract.ID}&name=${item.SP_ANNEX_ADDR4}&type=3`-->
<!--                           :download="item.upload_name" style="margin-right: 5px">{{item.upload_name}}</a>-->

                        <span :key="index"
                              @click="onLegalFinalizeContractBySyncDownload(item)"
                              style="margin-right: 5px;color: #00B4FF;cursor: pointer">{{item.upload_name}}</span>
                      </template>
                    </div>
                    <el-button v-if="isVisableSyncButton" class="sync__button" size="small" type="primary"
                               @click="onSync">{{$lang('同步')}}
                    </el-button>
                    <el-button v-else class="sync__button" size="small" type="primary"
                               @click="onClosedSync">{{$lang('取消同步')}}
                    </el-button>
                  </div>
                </td>

                <!--            合同处于转审人、财务、待上传展示-->
                <td v-if="contract.audit_status_cd==='N003660004' || contract.audit_status_cd==='N003660005' || contract.audit_status_cd==='N003660006'">
                  <span class="contract__table-required-filed">{{$lang('法务上传待盖章确认文件链接*')}}</span>
                </td>
                <td v-if="contract.audit_status_cd==='N003660004' || contract.audit_status_cd==='N003660005' || contract.audit_status_cd==='N003660006'">
                  <template v-for="(item,index) in legalFinalizeContractLinks">
                    <template v-for="(value,key) in contractAgreement">
                      <span v-if="item.contract_agreement===key" style="margin-left: 10px">{{value}}:</span>
                    </template>
                    <!--                    <a :key="index"-->
                    <!--                       :href=`/index.php?m=supplier&a=contract_download&ID=${contract.ID}&name=${item.file_name}&type=4`-->
                    <!--                       :download="item.SP_ANNEX_ADDR4" style="margin-right: 5px">{{item.SP_ANNEX_ADDR4}}</a>-->
                    <span :key="index"
                          @click="onLegalFinalizeContractDownload(item)"
                          style="margin-right: 5px;color: #00B4FF;cursor: pointer">{{item.upload_name}}</span>
                  </template>
                </td>
              </tr>
              </tbody>
            </table>
          </el-form>


          <el-table
          v-if="contract.CONTRACT_TYPE == 11 && this.contract.audit_status_cd != 'N003660007' && this.contract.audit_status_cd != 'N003660008' && this.contract.audit_status_cd != 'N003660009'"
          class="getTrademarkInfoTable"
          :data="getTrademarkInfoData"
          style="width: 100%">
          <el-table-column
            prop="trademark_no"
            label="商标编号"
            >
          </el-table-column>
           <el-table-column
            prop="trademark_name"
            label="商标名称"
            >
          </el-table-column>
          <el-table-column
            prop="country_name"
            label="国家"
            >
          </el-table-column>
          <el-table-column
            prop="company_name"
            label="公司"
            >
          </el-table-column>
          <el-table-column
            prop="register_code"
            label="商标注册号"
            >
          </el-table-column>
          <el-table-column
            prop="international_type"
            label="国际分类"
            >
          </el-table-column>
          <el-table-column
            prop="goods"
            label="商品/服务"
            >
          </el-table-column>
          <el-table-column
            prop="trademark_type_name"
            label="商标类型"
            >
          </el-table-column>
          <el-table-column
            prop="state_name"
            label="当前状态"
            >
          </el-table-column>
        </el-table>




          <el-row
              v-if="auditStatus==='N003660002'||auditStatus==='N003660003'||auditStatus==='N003660004'||auditStatus==='N003660005' ||auditStatus==='N003660006' || auditChildStatus==='N003760001' || auditChildStatus==='N003760002' || auditChildStatus==='N003760003'"
              class="approval__form" :gutter="20">
            <el-col :sm="24">
              <el-form
                  :model="approval"
                  ref="approvalForm"
              >
                <table class="contract__table">
                  <caption class="contract__table-header">{{$lang('审批意见（若此合同需要更高级别领导审核，请发起转审）')}}</caption>
                  <tbody class="contract__table-tbody">
                  <template v-for="(item,index) in approval.approvalOpinion">
                    <tr :key="index">
                      <td>
                    <span
                        class="contract__table-required-filed">{{$lang(`${item.type ? item.type : '法务'}${item.created_by}审批意见*`)}}</span>
                      </td>
                      <td>
                        <el-form-item
                            :prop="'approvalOpinion.' + index + '.remark'"
                            :rules="[{ required: true, message: $lang('审批意见'), trigger: 'blur' }]">
                          <el-input
                              :disabled="item.isDisabled?true:false"
                              class="inline-input"
                              v-model="item.remark"
                          />
                        </el-form-item>
                      </td>
                    </tr>
                  </template>
                  </tbody>
                </table>
              </el-form>
            </el-col>
          </el-row>
          <el-row :gutter="20" class="archived__information-form"
                  v-if="auditChildStatus==='N003760001' || auditChildStatus==='N003760002' || auditChildStatus==='N003760003'">
            <el-col :sm="24">
              <el-form
                  :model="archivedInformation"
                  ref="approvalForm"
              >
                <table class="contract__table">
                  <caption class="contract__table-header">{{$lang('盖章归档信息')}}</caption>
                  <tbody class="contract__table-tbody">
                  <!--                  N003760001 待法务盖章-->
                  <!--                  N003760002 待业务上传定稿合同-->
                  <!--                  N003760003 待法务确认归档-->
                  <tr v-if="auditChildStatus==='N003760001' || auditChildStatus==='N003760002' || auditChildStatus==='N003760003'">
                    <td>
                      <span class="contract__table-required-filed">{{$lang('法务盖章')}}</span>
                    </td>
                    <td>
                      <el-button
                          v-if="isVisableSealButton"
                          :disabled="isDisabledSealButton"
                          :loading="saving"
                          class="button"
                          @click="onSeal"
                      >{{$lang('已盖章')}}
                      </el-button
                      >
                      <el-button
                          v-if="isVisableNotSealButton"
                          :disabled="isDisabledNotSealButton"
                          :loading="saving"
                          class="button"
                          @click="onNotSeal"
                      >{{$lang('无需盖章')}}
                      </el-button
                      >
                    </td>
                  </tr>
                  <tr v-if="auditChildStatus==='N003760002' || auditChildStatus==='N003760003'">
                    <td>
                      <span class="contract__table-required-filed">{{$lang('业务上传盖章版定稿合同')}}</span>
                    </td>
                    <td v-if="auditChildStatus==='N003760002'">
                      <div slot="tip" class="el-upload__tip">{{$lang('上传的文件不能超过50MB')}}</div>
                      <div class="seal">
                        <div class="seal__left">
                          <template v-for="(item,index) in archivedInformation.finalizeContractFiled">
                            <el-form-item
                                :key="index"
                                class="finalize__contract-form-item"
                                :prop="'finalizeContractFiled.' + index + '.contract_agreement'"
                                :rules="[{ required: true, message: $lang('请选择'), trigger: 'change' }]">
                              <div class="finalize__contract">
                                <el-select v-model="item.contract_agreement" :placeholder="$lang('请选择')">
                                  <el-option
                                      v-for="(value,key) in contractAgreement"
                                      :key="key"
                                      :label="value"
                                      :value="key">
                                  </el-option>
                                </el-select>
                                <el-upload
                                    class="upload-demo"
                                    ref="upload"
                                    action=""
                                    :on-change="onUploadChangeByFinalizedContract"
                                    :auto-upload="false"
                                    multiple
                                    :limit="2">
                                  <el-button size="small" type="primary" @click="onUploadByFinalizedContract(index)">
                                    {{$lang('点击上传')}}
                                  </el-button>
                                </el-upload>
                                <div class="finalize__contract-actions">
                                  <i v-if="archivedInformation.finalizeContractFiled.length===1 || index===(archivedInformation.finalizeContractFiled.length-1)"
                                     class="el-icon-plus" @click="onAddByFinalizedContract"></i>
                                  <i v-if="archivedInformation.finalizeContractFiled.length>1" class="el-icon-minus"
                                     @click="onMinusByFinalizedContract(index)"></i>
                                </div>

                              </div>
                            </el-form-item>
                          </template>
                        </div>
                        <div class="seal__right">
                          <el-button size="small" type="primary" @click="onFinalizeContractUpload">
                            {{$lang('确认上传')}}
                          </el-button>
                        </div>
                      </div>
                    </td>

                    <td v-if="auditChildStatus==='N003760003'">
                      <template v-for="(item,index) in finalizeContractFiledLinks">
                        <template v-for="(value,key) in contractAgreement">
                          <span v-if="item.contract_agreement===key" style="margin-left: 10px">{{value}}:</span>
                        </template>
                        <!--                        <a :key="index"-->
                        <!--                           :href=`/index.php?m=supplier&a=contract_download&ID=${contract.ID}&name=${item.file_name}&type=1`-->
                        <!--                           :download="item.upload_name" style="margin-right: 5px">{{item.upload_name}}</a>-->
                        <span :key="index"
                              @click="onFinalizeContractFiledDownload(item)"
                              style="margin-right: 5px;color: #00B4FF;cursor: pointer">{{item.upload_name}}</span>
                      </template>
                    </td>
                  </tr>
                  <tr v-if="auditChildStatus==='N003760003'">
                    <td>
                      <span class="contract__table-required-filed">{{$lang('法务确认归档')}}</span>
                    </td>
                    <td>
                      <el-button
                          :loading="saving"
                          v-if="isVisableArchiveButton"
                          :disabled="isDisabledArchiveButton"
                          class="button"
                          @click="onArchive"
                      >{{$lang('已归档')}}
                      </el-button
                      >
                    </td>
                  </tr>
                  </tbody>
                </table>
              </el-form>
            </el-col>
          </el-row>
          <el-row :gutter="20">
            <el-col :offset="2" :sm="20">
              <div class="edit__actions">
                <el-button
                    v-if="auditStatus==='N003660002' || auditStatus==='N003660004'"
                    :loading="saving"
                    class="button"
                    @click="onReturn('4')"
                >{{$lang('退回')}}
                  <!--                  4-->
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660002'||auditStatus==='N003660003'||auditStatus==='N003660004'||auditStatus==='N003660005'"
                    :loading="saving"
                    class="button"
                    @click="onPass('2')"
                >{{$lang('通过')}}
                  <!--                  2-->
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660002'||auditStatus==='N003660003'||auditStatus==='N003660004'||auditStatus==='N003660005'"
                    type="primary"
                    class="button"
                    :loading="saving"
                    @click="onReject('1')"
                >{{$lang('驳回')}}
                  <!--                  '1'-->
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660002' || auditStatus==='N003660004'"
                    type="primary"
                    :loading="saving"
                    class="button"
                    @click="onTurn('3')"
                >{{$lang('转审')}}
                </el-button
                >

                <!--                <el-button-->
                <!--                    v-if="auditStatus==='N003660006'"-->
                <!--                    type="primary"-->
                <!--                    :loading="saving"-->
                <!--                    class="button"-->
                <!--                    @click="onSubmit"-->
                <!--                >{{$lang('提交')}}-->
                <!--                </el-button-->
                <!--                >-->

                <!--在处于草稿状态下-->
                <el-button
                    v-if="auditStatus==='N003660001' && isEditDraft"
                    :loading="saving"
                    class="button"
                    @click="onEdit('4')"
                >
                  <span>{{$lang('编辑合同')}}</span>
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660001' && !isEditDraft"
                    :loading="saving"
                    class="button"
                    @click="onSaveByDraftState('1')"
                >
                  <span>{{$lang('存草稿')}}</span>
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660001'"
                    :loading="saving"
                    class="button"
                    @click="onSumbitByDraftState('2')"
                >{{$lang('提交合同')}}
                </el-button
                >
                <el-button
                    v-if="auditStatus==='N003660001'"
                    type="primary"
                    :loading="saving"
                    class="button"
                    @click="onCloseApproval('3')"
                >{{$lang('取消合同审批')}}
                </el-button
                >
              </div>
            </el-col>
          </el-row>
        </el-tab-pane>
        <el-tab-pane :label="$lang('日志详情')" name="log">
          <div class="table_——log-info">
            <el-table
                :data="logTableData"
                border
                style="width: 100%;margin-bottom: 20px ;">
              <el-table-column
                  prop="module"
                  :label="$lang('时间')"
                  align="center">
                <template slot-scope="scope">
                  <span>{{ $lang(scope.row.time) }}</span>
                </template>
              </el-table-column>
              <el-table-column
                  prop="field_name"
                  :label="$lang('操作人')"
                  align="center">
                <template slot-scope="scope">
                  <span>{{ $lang(scope.row.user) }}</span>
                </template>
              </el-table-column>
              <el-table-column
                  prop="front_value"
                  align="center"
                  :label="$lang('详细信息')">
                <template slot-scope="scope">
                  <span>{{ $lang(scope.row.msg) }}</span>
                </template>
              </el-table-column>
            </el-table>
          </div>
        </el-tab-pane>

        <!--        处于草稿状态、合同取消、合同驳回下不展示-->
        <el-tab-pane :label="$lang('审批流程图')" name="flow"
                     v-if="contract.audit_status_cd!=='N003660001' && contract.audit_status_cd!=='N003660008' && contract.audit_status_cd!=='N003660009'">
          <el-row :gutter="20">
            <el-col :md="24">
              <div class="flow">
                <div class="flow__start">
                  <span>{{$lang('开始')}}</span>
                </div>
                <template v-for="(item,index) in flowChartData">
                  <div class="flow__arrows">
                    <img src="./Application/Tpl/Home/Public/images/right-arrow.png"/>
                  </div>
                  <div class="flow__content" :class="{isActive:item.current_show==='Y'?true:false}">
                    <span>{{item.msg}}</span>
                  </div>
                </template>
                <div class="flow__arrows">
                  <img src="./Application/Tpl/Home/Public/images/right-arrow.png"/>
                </div>
                <div class="flow__end">
                  <span>{{$lang('结束')}}</span>
                </div>
              </div>
            </el-col>
          </el-row>
        </el-tab-pane>
      </el-tabs>
    </div>
    <el-dialog
        title="提示"
        v-if="isTurnPeopleDialogVisible"
        :visible.sync="isTurnPeopleDialogVisible"
        class="turn__people-el-dialog"
        width="30%">
      <el-form
          :model="turnPeople"
          ref="turnPeopleForm"
      >
        <el-row :gutter="20">
          <el-col :sm="24">
            <el-form-item
                prop="transfer_by"
                :rules="[{ required: true, message: $lang('请输入转审人'), trigger: 'blur' }]">
              <div class="turn__people-dialog">
                <span style="margin-right: 10px">{{$lang('转审人*')}}</span>
                <el-select v-model="turnPeople.transfer_by" filterable :placeholder="$lang('请选择')">
                  <el-option
                      v-for="(item,index) in allUsers"
                      :key="index"
                      :label="item.name"
                      :value="item.name">
                  </el-option>
                </el-select>
              </div>
            </el-form-item>
          </el-col>
        </el-row>
      </el-form>
      <div class="actions">
        <el-button @click="isTurnPeopleDialogVisible = false">{{$lang('取消')}}</el-button>
        <el-button type="primary" @click="onTurnPeople('3')">{{$lang('确定')}}</el-button>
      </div>
      </span>
    </el-dialog>
  </div>
</div>


<script src="/Application/Tpl/Home/Public/lib/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="./Application/Tpl/Home/Public/js/vue.2.5.13.js"></script>
<script type="text/javascript" src="./Application/Tpl/Home/Public/js/element-ui-2.2.js?v=<{$Think.const.V}>"></script>
<script type="text/javascript" src="../Public/wang-editor/release/wangEditor.min.js"></script>
<script type="text/javascript" src="/Application/Tpl/Home/Public/js/H-ui.js"></script>
<a href="javascript:void(0)" class="Hui-iconfont toTop" title="返回顶部" alt="返回顶部"
   style="width:40px;height:40px;display:none;position:fixed;right:50px;bottom:30px;z-index:999999"><img
    src="/Application/Tpl/Home/Public/images/top.png" style="width:42px;height:42px;margin-left:-1px;"></a>
<script type="text/javascript" src="/Application/Tpl/Home/Public/js/H-ui.admin.js?v=<{$Think.config.VER_NUM}>"></script>
<script type="text/javascript" src="./Application/Tpl/Home/Public/js/axios.min.js?v=201907011048"></script>
<script src="./Application/Tpl/Home/Public/js/lodash-4.17.15.js"></script>
<script type="text/javascript"
        src="./Application/Tpl/Home/Public/js/queryString.js?v=<{$Think.config.VER_NUM}>"></script>
<script>
    if (getCookie('think_language') !== "zh-cn") {
        ELEMENT.locale(ELEMENT.lang.en)
    }
</script>
<script>
    let vueApp = new Vue({
        el: '#main',
        data() {
            let phoneValidate = (rule, value, callback) => {
                let reg = /^1[3-9]\d{9}$/;
                if (!reg.test(value)) {
                    callback(new Error(this.$lang('请输入正确的手机号码')));
                } else {
                    callback();
                }
            };
            let emailValidate = (rule, value, callback) => {
                let reg = /^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;

                if (!reg.test(value)) {
                    callback(new Error(this.$lang('请输入正确的邮箱格式')));
                } else {
                    callback();
                }
            };
            let contentIsSpace = (rule, value, callback) => {
                let reg = /^[ ]+$/;
                console.log("当前内容", value);
                if (reg.test(value)) {
                    callback(new Error(this.$lang('内容不允许全部为空格')));
                } else {
                    callback();
                }
            };
            return {
                OPEN_HOST: '<{$OPEN_HOST}>',
                activeName: 'new',
                // fileUrl: `${window.AUTH_BASE_URL}files`,
                currentPanelName: "first",
                saving: false,
                isDisabled: false,
                isEditDraft: true,
                conDateType: [],
                conType: [],
                contractAgreement: {},
                contractState: {},
                currencyExtend: {},
                tax: [],
                invoiceType: {},
                isAutoRenew: [],
                ourCompany: {},
                contract: {
                    DATA_MARKING: "",
                    SP_ANNEX_NAME: "",
                    SP_ANNEX_NAME2: "",
                    CON_COMPANY_CD: "",
                    CONTRACT_TYPE: "",
                    CON_TYPE: "",
                    CON_STAT: "",
                    IS_RENEWAL: "",
                    currency_cd: "",
                    invoice_type_cd: "",
                    have_tax: "",
                    ID: "",
                    CONTRACTOR: "",
                    SP_NAME: "",
                    SP_RES_NAME: "",
                    SP_NAME_EN: "",
                    SP_RES_NAME_EN: "",
                    COMPANY_ADDR_INFO: "",
                    COMPANY_MARKET_INFO: "",
                    SP_CHARTER_NO: "",
                    SP_REMARK: "",
                    SP_YEAR_SCALE_CD_val: "",
                    cooperative_rating_val: "",
                    RISK_RATING_val: "",
                    SP_JS_TEAM_CD_val: "",
                    SALE_TEAM_val: "",
                    SP_TEAM_CD_val: "",
                    COPANY_TYPE_CD_val: "",
                    office_address: "",
                    register_address: "",
                    is_synchro: "N",
                    finalizeContract: [{
                        contract_agreement: "",
                        SP_ANNEX_ADDR3: ""
                    }],
                    legalFinalizeContract: [{
                        contract_agreement: "",
                        SP_ANNEX_ADDR4: ""
                    }]
                },
                finalizeContractLinks: [],
                legalFinalizeContractLinks: [],
                finalizeContractFiledLinks: [],
                legalFinalizeContractBySync: [],
                finalizeContractByBusiness: [],
                logTableData: [],
                flowChartData: [],
                approval: {
                    approvalOpinion: [],
                },
                archivedInformation: {
                    finalizeContractFiled: [{
                        contract_agreement: "",
                        SP_ANNEX_ADDR1: ""
                    }],
                },
                approvalOpinionList: [],
                turnPeople: {
                    transfer_by: null
                },
                isTurnPeopleDialogVisible: false,
                isVisableLegalUpload: true,
                isVisableSyncButton: true,
                turnType: null,
                users: [],
                allUsers: [],
                emailValidate: emailValidate,
                contentIsSpace: contentIsSpace,
                fileListLength: 0,
                fileListLengthByFinalizedContract: 0,
                fileListLengthByLegalFinalizedContract: 0,
                fileList: {
                    0: []
                },
                fileListByFinalizedContract: {
                    0: []
                },
                fileListByLegalFinalizedContract: {
                    0: []
                },
                startDatePickerOptions: {
                    disabledDate: date => {
                        const endDate = this.contract.END_TIME;
                        return  !isNaN(new Date(endDate).getTime()) && (new Date(date).getTime()+24*60*60*1000) > new Date(endDate).getTime();
                    }
                },
                endDatePickerOptions: {
                    disabledDate: date => {
                        const startDate = this.contract.START_TIME;
                        return !isNaN(new Date(startDate).getTime()) && new Date(date).getTime() < new Date(startDate).getTime();
                    }
                },
                uploadFileIndex: 0,
                uploadFileIndexByFinalizedContract: 0,
                uploadFileIndexByLegalFinalizedContract: 0,
                auditStatus: null,
                auditChildStatus: null,
                isVisableSealButton: true,
                isVisableNotSealButton: true,
                isDisabledSealButton: false,
                isDisabledNotSealButton: false,
                isVisableArchiveButton: true,
                isDisabledArchiveButton: false,
                getTrademarkInfoData:[]
            }
        },
        watch: {},
        computed: {
            isLegalOpinion: function () {
                if (this.contract.audit_status_cd === 'N003660003' || this.contract.audit_status_cd === 'N003660004' || this.contract.audit_status_cd === 'N003660005') {
                    return true
                } else {
                    return false
                }
            },
            isTurnPeopleOpinion: function () {
                if (this.contract.audit_status_cd === 'N003660004' || this.contract.audit_status_cd === 'N003660005') {
                    return true
                } else {
                    return false
                }
            },
            isFinanceOpinion: function () {
                if (this.contract.audit_status_cd === 'N003660005') {
                    return true
                } else {
                    return false
                }
            },
        },
        created() {
            axios.post('/index.php?m=ContractNew&a=getAuditCommonData').then((res) => {
                let data = res.data.data;
                this.conDateType = data.conDateType;
                this.conType = data.conType;
                this.contractAgreement = data.contractAgreement;
                this.contractState = data.contractState;
                this.currencyExtend = data.getCurrencyExtend;
                this.tax = data.hasTax;
                this.invoiceType = data.invoiceType;
                this.isAutoRenew = data.isAutoRenew;
                this.ourCompany = data.ourCompany;
                this.getDetailById();
                this.getLogDetailById();
                this.getFlowChartDetailById();
            });

        },
        mounted() {
            // let id = window.location.href.split("ID=")[1];
            // let a = document.getElementById('contractDetailId');
            // a.href = `index.php?m=contract&a=log&id=${id}`;

            let createByInput = document.querySelector('.contractor input');
            createByInput.onkeyup = function (e) {
                createByInput.value = createByInput.value.replace(/[\u4e00-\u9fa5]/gi, '');
                createByInput.value = createByInput.value.replace(/[0-9]*/gi, '')
            };
        },
        methods: {
            getDetailById() {
                let id = window.location.href.split("ID=")[1];
                // let a = document.getElementById('contractDetailId');
                // a.href = `index.php?m=contract&a=log&id=${id}`;

                axios.post('/index.php?m=ContractNew&a=getContractInfo', {
                    data: {
                        "contract_id": id
                    }
                }).then((res) => {
                    let contract = res.data.data;
                    this.trademarkNumberBlur(contract.trademark_no)

                    // 初稿合同
                    let finalizeContract = JSON.parse(contract.finalizeContract ? contract.finalizeContract : null);
                    if (finalizeContract) {
                        this.finalizeContractLinks = finalizeContract
                    }

                    console.log("初稿文件链接", this.finalizeContractLinks);
                    if (finalizeContract) { //在获取详情时若初稿文件的数组存在值时清空默认的值
                        this.contract.finalizeContract = [];
                    } else {
                        contract.finalizeContract = this.contract.finalizeContract;
                    }

                    // 法律合同文件
                    let legalFinalizeContract = JSON.parse(contract.legalFinalizeContract ? contract.legalFinalizeContract : null);
                    if (legalFinalizeContract) {
                        this.legalFinalizeContractLinks = legalFinalizeContract
                    }

                    console.log("法律文件链接", this.legalFinalizeContractLinks);
                    if (legalFinalizeContract) { //在获取详情时若法律合同文件的数组存在值时清空默认的值
                        this.contract.legalFinalizeContract = [];
                    } else { //默认展示一条可操作的数据
                        contract.legalFinalizeContract = this.contract.legalFinalizeContract;
                    }

                    // 业务上传的定稿合同
                    if (contract.audit_status_sec_cd === 'N003760002') { //处于待业务上传定稿合同状态
                        this.archivedInformation.finalizeContractFiled = [{
                            contract_agreement: "",
                            SP_ANNEX_ADDR1: ""
                        }];
                    }

                    if (contract.audit_status_sec_cd === 'N003760003') { //处于待法务确认归档
                        let finalizeContractFiled = JSON.parse(contract.SP_ANNEX_ADDR1 ? contract.SP_ANNEX_ADDR1 : null);
                        if(finalizeContractFiled){
                            this.finalizeContractFiledLinks  = finalizeContractFiled;
                        }
                    }

                    this.contract = contract;

                    // 初稿合同文件
                    if (finalizeContract) {
                        this.contract.finalizeContract = [];
                        finalizeContract.forEach((obj, index) => {
                            this.contract.finalizeContract.push({
                                contract_agreement: obj.contract_agreement,
                                SP_ANNEX_ADDR3: obj.file_name,
                                upload_name: obj.upload_name
                            });
                            this.fileList[index] = [];
                            this.fileList[index].push({name: obj.upload_name, original_name: obj.file_name});
                        });
                    }

                    // 法律合同文件
                    if (legalFinalizeContract) {
                        this.contract.legalFinalizeContract = [];
                        legalFinalizeContract.forEach((obj, index) => {
                            this.contract.legalFinalizeContract.push({
                                contract_agreement: obj.contract_agreement,
                                SP_ANNEX_ADDR4: obj.file_name,
                            });
                            this.fileListByLegalFinalizedContract[index] = [];
                            this.fileListByLegalFinalizedContract[index].push({
                                name: obj.upload_name,
                                original_name: obj.file_name
                            });
                        });
                    }

                    this.auditStatus = this.contract.audit_status_cd;
                    this.auditChildStatus = this.contract.audit_status_sec_cd;
                    if (this.contract.supplier_id) {
                        this.onCheckID(false);
                    }
                    if (this.contract.audit_status_cd === 'N003660008' || this.contract.audit_status_cd === 'N003660001' || this.contract.audit_status_cd === 'N003660002' || this.contract.audit_status_cd === 'N003660003' || this.contract.audit_status_cd === 'N003660004' || this.contract.audit_status_cd === 'N003660005' || this.contract.audit_status_cd === 'N003660006' || this.contract.audit_status_cd === 'N003660007') { //如果处于驳回的状态， 待领导审批 待提交合同那么所有的表单项都处于禁用状态
                        this.isDisabled = true;
                    }
                    if (this.contract.seal_status === '1') {
                        this.isVisableSealButton = true;
                        this.isVisableNotSealButton = false;
                        this.isDisabledSealButton = true;
                    } else if (this.contract.seal_status === '2') {
                        this.isVisableSealButton = false;
                        this.isVisableNotSealButton = true;
                        this.isDisabledNotSealButton = true;

                    }
                    this.getAuditInfo();
                })
            },
            getLogDetailById: function () {
                let id = window.location.href.split("ID=")[1];
                axios.post("/index.php?m=ContractNew&a=getLog", {
                    "data": {
                        "contract_id": id
                    }
                }).then((res) => {
                    console.log("日志详情数据", res);
                    if (res.data.code === 2000) {
                        this.logTableData = res.data.data;
                    }
                })
            },
            getFlowChartDetailById() {
                let id = window.location.href.split("ID=")[1];

                axios.post("/index.php?m=ContractNew&a=flow", {
                    "data": {
                        "contract_id": id
                    }
                }).then((res) => {
                    console.log("流程图详情数据", res);
                    if (res.data.code === 2000) {
                        this.flowChartData = res.data.data;
                    }
                })
            },
            getAuditInfo() {
                // 在同意或转审的时候调用或刷新
                axios.post('/index.php?m=ContractNew&a=getAuditInfo', {
                    "data": {
                        "contract_id": this.contract.ID,
                    }
                }).then((res) => {
                    this.approval.approvalOpinion = []; //先清空

                    this.approval.approvalOpinion = res.data.data;
                    this.getAuditNameInfo();
                })
            },
            getAuditNameInfo() {
                axios.post('/index.php?m=ContractNew&a=getAuditNameInfo', {
                    "data": {
                        "contract_id": this.contract.ID,
                    }
                }).then((res) => {
                    this.auditNameInfo = res.data.data;
                    console.log("审批人名称", this.auditNameInfo);
                    // 将当前获取的职务及人名赋值给审批列表中的最后一条数据
                    if (this.auditNameInfo) {
                        // this.approval.approvalOpinion = res.data.data;
                        if (this.approval.approvalOpinion.length !== 0) { //如果审批意见列表里已经有值,则禁用这些输入框
                            this.approval.approvalOpinion.forEach((obj) => {
                                if (obj.id && obj.remark) {
                                    this.$set(obj, "isDisabled", true);
                                }
                            });
                        }

                        // 根据当前获取的审批人信息给最后一条数据加上可输入框并且是在法务、转审人、财务审批状态下
                        if (this.auditStatus === 'N003660002' || this.auditStatus === 'N003660003' || this.auditStatus === 'N003660004' || this.auditStatus === 'N003660005') {
                            this.approval.approvalOpinion.push({
                                created_by: "",
                                remark: ""
                            });
                            this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].type = this.auditNameInfo.type;
                            this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].created_by = this.auditNameInfo.person;
                        }

                    }
                })
            },
            onLenovoQuery(value, cb) {
                axios.post(`/index.php?g=common&m=user&a=search_user`, Qs.stringify({name: this.contract.CONTRACTOR})).then((res) => {
                    this.users = res.data.data;
                    this.users.forEach((obj) => {
                        obj.value = obj.name
                    })
                    cb(this.users);
                })
            },
            onCheckID(value) {
                // this.$refs.form.validateField('supplier_id');

                axios.post(`/index.php?m=Supplier&a=autoload_supplier`, {
                    supplier_id: this.contract.supplier_id
                }).then((res) => {
                    if (res.data.status === 1) {
                        let data = res.data.info;
                        if (value) { //如果是手动点击查询的就给提示信息
                            this.$message.success(this.$lang(res.data.data));
                        }


                        this.$set(this.contract, "DATA_MARKING", data.DATA_MARKING ? data.DATA_MARKING : " ")
                        this.$set(this.contract, "SP_ANNEX_NAME", data.SP_ANNEX_NAME ? data.SP_ANNEX_NAME : " ")
                        this.$set(this.contract, "SP_ANNEX_NAME2", data.SP_ANNEX_NAME2 ? data.SP_ANNEX_NAME2 : " ")
                        this.$set(this.contract, "SP_NAME", data.SP_NAME ? data.SP_NAME : " ")
                        this.$set(this.contract, "SP_RES_NAME", data.SP_RES_NAME ? data.SP_RES_NAME : " ")
                        this.$set(this.contract, "SP_NAME_EN", data.SP_NAME_EN ? data.SP_NAME_EN : " ")
                        this.$set(this.contract, "SP_RES_NAME_EN", data.SP_RES_NAME_EN ? data.SP_RES_NAME_EN : " ")
                        this.$set(this.contract, "COMPANY_ADDR_INFO", data.COMPANY_ADDR_INFO ? data.COMPANY_ADDR_INFO : " ")
                        this.$set(this.contract, "COMPANY_MARKET_INFO", data.COMPANY_MARKET_INFO ? data.COMPANY_MARKET_INFO : " ")
                        this.$set(this.contract, "SP_CHARTER_NO", data.SP_CHARTER_NO ? data.SP_CHARTER_NO : " ")
                        this.$set(this.contract, "SP_REMARK", data.SP_REMARK ? data.SP_REMARK : " ")
                        this.$set(this.contract, "SP_YEAR_SCALE_CD_val", data.SP_YEAR_SCALE_CD_val ? data.SP_YEAR_SCALE_CD_val : " ")
                        this.$set(this.contract, "SP_TEAM_CD_val", data.SP_TEAM_CD_val ? data.SP_TEAM_CD_val : " ")
                        this.$set(this.contract, "cooperative_rating_val", data.cooperative_rating_val ? data.cooperative_rating_val : " ")
                        this.$set(this.contract, "RISK_RATING_val", data.RISK_RATING_val ? data.RISK_RATING_val : " ")
                        this.$set(this.contract, "SP_JS_TEAM_CD_val", data.SP_JS_TEAM_CD_val ? data.SP_JS_TEAM_CD_val : " ")
                        this.$set(this.contract, "SALE_TEAM_val", data.SALE_TEAM_val ? data.SALE_TEAM_val : " ")
                        this.$set(this.contract, "SP_TEAM_CD_val", data.SP_TEAM_CD_val ? data.SP_TEAM_CD_val : " ")
                        this.$set(this.contract, "COPANY_TYPE_CD_val", data.COPANY_TYPE_CD_val ? data.COPANY_TYPE_CD_val : " ")
                        this.$set(this.contract, "office_address", data.office_address ? data.office_address : " ")
                        this.$set(this.contract, "register_address", data.register_address ? data.register_address : " ")
                    } else {
                        this.$message.error(this.$lang(res.data.data))
                    }
                })
            },
            onFinalizeContractDownload(item) {
                const responseType = "blob";
                axios.get(`/index.php?m=supplier&a=contract_download&ID=${this.contract.ID}&name=${item.file_name}&type=3`,{
                    responseType: responseType
                }).then((res)=>{
                    let alink = document.createElement("a");
                    alink.href = URL.createObjectURL(res.data);
                    alink.download = item.upload_name;
                    alink.click();
                })
            },
            onLegalFinalizeContractDownload(item) {
                console.log("法务合同链接", item);
                const responseType = "blob";
                axios.get(`/index.php?m=supplier&a=contract_download&ID=${this.contract.ID}&name=${item.file_name}&type=4`,{
                    responseType: responseType
                }).then((res)=>{
                    let alink = document.createElement("a");
                    alink.href = URL.createObjectURL(res.data);
                    alink.download = item.upload_name;
                    alink.click();
                })
            },
            onFinalizeContractFiledDownload(item){
                const responseType = "blob";
                axios.get(`/index.php?m=supplier&a=contract_download&ID=${this.contract.ID}&name=${item.file_name}&type=1`,{
                    responseType: responseType
                }).then((res)=>{
                    let alink = document.createElement("a");
                    alink.href = URL.createObjectURL(res.data);
                    alink.download = item.upload_name;
                    alink.click();
                })
            },
            onLegalFinalizeContractBySyncDownload(item){
                const responseType = "blob";
                axios.get(`/index.php?m=supplier&a=contract_download&ID=${this.contract.ID}&name=${item.SP_ANNEX_ADDR3}&type=3`,{
                    responseType: responseType
                }).then((res)=>{
                    let alink = document.createElement("a");
                    alink.href = URL.createObjectURL(res.data);
                    alink.download = item.upload_name;
                    alink.click();
                })
            },
            onSync() {
                // finalizeContract为初稿合同数组
                console.log("同步",this.contract.finalizeContract);
                this.contract.finalizeContract.forEach((obj) => {
                    this.legalFinalizeContractBySync.push({
                        SP_ANNEX_ADDR3: obj.SP_ANNEX_ADDR3,
                        contract_agreement: obj.contract_agreement,
                        upload_name: obj.upload_name
                    });
                });
                if (this.legalFinalizeContractBySync.length !== 0) {
                    this.isVisableSyncButton = false;
                    this.isVisableLegalUpload = false;
                    this.contract.is_synchro = "Y";
                }
                console.log("同步按钮", this.legalFinalizeContractBySync);
            },
            onClosedSync() {
                this.legalFinalizeContractBySync = [];
                this.isVisableLegalUpload = true;
                this.isVisableSyncButton = true;

                this.contract.is_synchro = "N";
            },
            onSeal() {
                axios.post('/index.php?m=ContractNew&a=saveSealStatus', {
                    data: {
                        contract_id: this.contract.ID,
                        seal_status: "1",
                    }
                }).then((res) => {
                    if (res.data.code === 2000) {
                        this.$message.success(this.$lang('盖章成功'));
                        this.getDetailById();
                    } else {
                        this.$message.success(res.data.msg);
                    }
                    console.log("盖章成功", res);
                })
            },
            onNotSeal() {
                axios.post('/index.php?m=ContractNew&a=saveSealStatus', {
                    data: {
                        contract_id: this.contract.ID,
                        seal_status: "2",
                    }
                }).then((res) => {
                    if (res.data.code === 2000) {
                        this.$message.success(this.$lang('无需盖章成功'));
                        this.getDetailById();
                    } else {
                        this.$message.success(res.data.msg);
                    }
                    console.log("无需盖章成功", res);
                })
            },
            onArchive() {
                axios.post('/index.php?m=ContractNew&a=saveFileStatus', {
                    data: {
                        contract_id: this.contract.ID,
                    }
                }).then((res) => {
                    if (res.data.code === 2000) {
                        this.$message.success('已归档成功');
                        // this.getDetailById();
                        let a = document.createElement('a');
                        let href = "/index.php?m=contract&a=show&ID=" + this.contract.ID;
                        a.setAttribute("onclick", "changenewtab(this,'" + this.$lang('合同详情页') + "')");
                        a.setAttribute("_href", href);
                        a.click();
                    }
                    console.log("已归档成功", res);
                })
            },
            onUpload(index) {
                this.uploadFileIndex = index;
            },
            onUploadChange(file, filelist) {
                if (file.size > (50 * 1024 * 1024)) {
                    this.$refs.upload[this.uploadFileIndex].clearFiles();
                    return this.$message.error(this.$lang('上传的文件大小不能超过50M'));
                }

                if (file.status === "ready" && filelist.length > 1) {
                    filelist.splice(0, 1);
                }

                this.contract.finalizeContract[this.uploadFileIndex].SP_ANNEX_ADDR3 = file.raw;

                this.fileListLength = filelist.length;
            },
            onRemove() {
            },
            onBeforeRemove() {
            },
            onAdd() {
                this.contract.finalizeContract.push({
                    contract_agreement: null,
                    SP_ANNEX_ADDR3: []
                })
            },
            onMinus(index) {
                this.contract.finalizeContract.splice(index, 1);
            },
            onReturn(type) {
                this.$confirm(this.$lang('确认退回此次合同审批申请吗？')).then(() => {
                    axios.post('/index.php?m=ContractNew&a=audit', {
                        data: {
                            "contract_id": this.contract.ID,
                            "remark": this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].remark,
                            "type": type
                        }
                    }).then((res) => {
                        if (res.data.code === 2000) {
                            this.$message.success(this.$lang(res.data.msg));
                            this.getDetailById();
                        } else {
                            this.$message.error(this.$lang(res.data.msg));
                        }
                    })
                })

            },
            onPass(type) {
                this.saving = true;
                this.$refs['form'].validate((formValid) => {
                    if (formValid) {
                        if (this.auditStatus === "N003660003") { // 只有在处于法务审批时
                            this.$refs['approvalForm'].validate((valid) => {
                                if (valid) {
                                    let formData = new FormData();
                                    // 判断是否点击了同步按钮
                                    if (this.contract.is_synchro === "Y") { //点击了同步按钮
                                        console.log("同步了", this.legalFinalizeContractBySync);
                                        this.legalFinalizeContractBySync.forEach((obj) => {
                                            formData.append("contract_agreement[]", obj.contract_agreement);
                                            formData.append("SP_ANNEX_ADDR4[]", obj.SP_ANNEX_ADDR3);
                                            formData.append("is_synchro", this.contract.is_synchro);

                                        });
                                        console.log("是通过同步按钮操作的");
                                    } else {
                                        this.contract.legalFinalizeContract.forEach((obj) => {
                                            formData.append("contract_agreement[]", obj.contract_agreement);
                                            formData.append("SP_ANNEX_ADDR4[]", obj.SP_ANNEX_ADDR4);
                                            formData.append("is_synchro", this.contract.is_synchro ? this.contract.is_synchro : 'N');
                                        });
                                    }

                                    formData.append("ID", this.contract.ID);
                                    axios.post('/index.php?m=ContractNew&a=audit', {
                                        data: {
                                            "contract_id": this.contract.ID,
                                            "remark": this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].remark,
                                            "type": type
                                        }
                                    }).then((res) => {
                                        if (res.data.code === 2000) {
                                            this.$message.success(this.$lang(res.data.msg));
                                            axios.post('/index.php?m=ContractNew&a=saveLegalFile', formData).then((res) => {
                                                if (res.data.code === 2000) {
                                                    this.$message.success(this.$lang(res.data.msg));
                                                    this.getDetailById();
                                                    this.saving = false;
                                                } else {
                                                    this.$message.error(this.$lang(res.data.msg));
                                                    this.saving = false;
                                                }
                                            })
                                        } else {
                                            this.$message.error(this.$lang(res.data.msg));
                                            this.saving = false;
                                        }
                                    })
                                } else {
                                    this.saving = false;
                                }
                            })
                        } else {
                            this.$refs['approvalForm'].validate((valid) => {
                                if (valid) {
                                    axios.post('/index.php?m=ContractNew&a=audit', {
                                        data: {
                                            "contract_id": this.contract.ID,
                                            "remark": this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].remark,
                                            "type": type
                                        }
                                    }).then((res) => {
                                        if (res.data.code === 2000) {
                                            this.$message.success(this.$lang(res.data.msg));
                                            this.getDetailById();
                                            this.saving = false;
                                        } else {
                                            this.$message.error(this.$lang(res.data.msg));
                                            this.saving = false;
                                        }
                                    })
                                } else {
                                    this.saving = false;
                                }
                            })
                        }
                    } else {
                        this.saving = false;
                    }
                })
            },
            onReject(type) { //驳回
                this.$refs['approvalForm'].validate((valid) => {
                    if (valid) {
                        this.$confirm(this.$lang('确认驳回此次合同审批申请吗？'))
                            .then(() => {
                                axios.post('/index.php?m=ContractNew&a=audit', {
                                    data: {
                                        "contract_id": this.contract.ID,
                                        "remark": this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].remark,
                                        "type": type
                                    }
                                }).then((res) => {
                                    if (res.data.code === 2000) {
                                        this.$message.success(this.$lang(res.data.msg));
                                        this.getDetailById();
                                    } else {
                                        this.$message.error(this.$lang(res.data.msg));
                                    }
                                })
                            })
                    }
                })
            },
            onTurn(type) {
                this.$refs['approvalForm'].validate((valid) => {
                    if (valid) {
                        axios.post(`/index.php?g=common&m=user&a=search_user`).then((res) => {
                            let userId = getCookie('userId');
                            console.log("用户ID", userId);

                            let allUsers = res.data.data;
                            allUsers.forEach((obj) => {
                                if (obj.id !== userId) {
                                    this.allUsers.push(obj);
                                }
                            })
                        })
                        this.isTurnPeopleDialogVisible = true;
                        this.turnType = type;
                    }
                })
            },
            // 确定转审
            onTurnPeople(type) {
                this.$refs['turnPeopleForm'].validate((valid) => {
                    if (valid) {
                        axios.post('/index.php?m=ContractNew&a=audit', {
                            data: {
                                "contract_id": this.contract.ID,
                                "remark": this.approval.approvalOpinion[this.approval.approvalOpinion.length - 1].remark,
                                "transfer_by": this.turnPeople.transfer_by,
                                "type": this.turnType
                            }
                        }).then((res) => {
                            if (res.data.code === 2000) {
                                this.$message.success(this.$lang(res.data.msg));
                                this.getDetailById();
                                this.isTurnPeopleDialogVisible = false;
                            } else {
                                this.$message.error(this.$lang(res.data.msg));
                            }
                        })
                    }
                })

            },

            /**********Start定稿合同文件上传****************/
            onUploadByFinalizedContract(index) {
                this.uploadFileIndexByFinalizedContract = index;
            },
            onUploadChangeByFinalizedContract(file, filelist) {
                if (file.size > (50 * 1024 * 1024)) {
                    this.$refs.upload[this.uploadFileIndex].clearFiles();
                    return this.$message.error(this.$lang('上传的文件大小不能超过50M'));
                }

                if (file.status === "ready" && filelist.length > 1) {
                    filelist.splice(0, 1);
                }

                this.archivedInformation.finalizeContractFiled[this.uploadFileIndexByFinalizedContract].SP_ANNEX_ADDR1 = file.raw;

                this.fileListLengthByLegalFinalizedContract = filelist.length;
            },
            onAddByFinalizedContract() {
                this.archivedInformation.finalizeContractFiled.push({
                    contract_agreement: null,
                    SP_ANNEX_ADDR1: []
                })
            },
            onMinusByFinalizedContract(index) {
                this.archivedInformation.finalizeContractFiled.splice(index, 1);
            },
            /**********End定稿合同文件上传****************/

            /**********Start法律合同文件上传****************/
            onUploadByLegalFinalizedContract(index) {
                this.uploadFileIndexByLegalFinalizedContract = index;
            },
            onUploadChangeByLegalFinalizedContract(file, filelist) {
                if (file.size > (50 * 1024 * 1024)) {
                    this.$refs.upload[this.uploadFileIndex].clearFiles();
                    return this.$message.error(this.$lang('上传的文件大小不能超过50M'));
                }
                if (file.status === "ready" && filelist.length > 1) {
                    filelist.splice(0, 1);
                }

                this.contract.legalFinalizeContract[this.uploadFileIndexByLegalFinalizedContract].SP_ANNEX_ADDR4 = file.raw;

                this.fileListLengthByLegalFinalizedContract = filelist.length;
            },
            onAddByLegalFinalizedContract() {
                this.contract.legalFinalizeContract.push({
                    contract_agreement: null,
                    SP_ANNEX_ADDR4: []
                })
            },
            onMinusByLegalFinalizedContract(index) {
                this.contract.legalFinalizeContract.splice(index, 1);
            },
            /**********End法律合同文件上传****************/

            // 处于待提交时
            onSubmit() {
                let formData = new FormData();
                this.archivedInformation.finalizeContractFiled.forEach((obj) => {
                    formData.append("contract_agreement[]", obj.contract_agreement);
                    formData.append("SP_ANNEX_ADDR1[]", obj.SP_ANNEX_ADDR1);
                });
                formData.append("contract_id", this.contract.ID);
                this.saving = true;
                this.$refs['form'].validate((valid) => {
                    if (valid) {
                        axios.post('/index.php?m=ContractNew&a=uploadAuditContract', formData).then((res) => {
                            if (res.data.code === 2000) {
                                this.$message.success(this.$lang('提交成功'));
                                this.saving = false;
                                // closeTab();
                                // backTab('/index.php?m=contract&a=show&ID=3338', this.$lang('合同列表'));
                                let a = document.createElement('a');
                                let href = "/index.php?m=contract&a=show&ID=" + this.contract.ID;
                                a.setAttribute("onclick", "changenewtab(this,'" + this.$lang('合同详情页') + "')");
                                a.setAttribute("_href", href);
                                a.click();
                                // 在同意或转审的时候调用
                                this.getAuditInfo();
                            } else {
                                this.$message.error(this.$lang(res.data.msg));
                                this.saving = false;
                            }
                        })
                    } else {
                        this.saving = false;
                    }
                })

            },
            onFinalizeContractUpload() {
                let formData = new FormData();
                this.archivedInformation.finalizeContractFiled.forEach((obj) => {
                    formData.append("contract_agreement[]", obj.contract_agreement);
                    formData.append("SP_ANNEX_ADDR1[]", obj.SP_ANNEX_ADDR1);
                });
                formData.append("contract_id", this.contract.ID);
                this.saving = true;
                this.$refs['form'].validate((valid) => {
                    if (valid) {
                        axios.post('/index.php?m=ContractNew&a=uploadAuditContract', formData).then((res) => {
                            if (res.data.code === 2000) {
                                this.$message.success(this.$lang('上传成功'));
                                this.saving = false;
                                this.getDetailById();
                            } else {
                                this.$message.error(this.$lang(res.data.msg));
                                this.saving = false;
                            }
                        })
                    } else {
                        this.saving = false;
                    }
                })
            },
            //草稿状态下
            onEdit() {
                this.isDisabled = !this.isDisabled;
                this.isEditDraft = !this.isEditDraft;
            },
            //将处于草稿状态合同进行提交
            onSumbitByDraftState(type) {
                let formData = new FormData();
                this.contract.finalizeContract.forEach((obj) => {
                    formData.append("contract_agreement[]", obj.contract_agreement);
                    formData.append("SP_ANNEX_ADDR3[]", obj.SP_ANNEX_ADDR3);
                })
                let fileNames = "";
                if (this.fileList[0].length !== 0) {
                    Object.keys(this.fileList).forEach((key) => {
                        fileNames += this.fileList[key][0].original_name + ","
                    });
                    fileNames = fileNames.substring(0, fileNames.length - 1)
                }

                formData.append("already_exist", fileNames);// 初稿合同已存在的名称
                formData.append("SP_NAME", this.contract.SP_NAME ? this.contract.SP_NAME : "");
                formData.append("BANK_ACCOUNT", this.contract.BANK_ACCOUNT ? this.contract.BANK_ACCOUNT : "");
                formData.append("CONTACT", this.contract.CONTACT ? this.contract.CONTACT : "");
                formData.append("CONTRACTOR", this.contract.CONTRACTOR ? this.contract.CONTRACTOR : "");
                formData.append("CONTRACT_TYPE", (this.contract.CONTRACT_TYPE !== null && this.contract.CONTRACT_TYPE !== "" && this.contract.CONTRACT_TYPE !== undefined) ? this.contract.CONTRACT_TYPE : "");
                formData.append("CON_COMPANY_CD", (this.contract.CON_COMPANY_CD !== null && this.contract.CON_COMPANY_CD !== "" && this.contract.CON_COMPANY_CD !== undefined) ? this.contract.CON_COMPANY_CD : "");
                formData.append("CON_COMPANY_SEC", (this.contract.CON_COMPANY_SEC !== null && this.contract.CON_COMPANY_SEC !== "" && this.contract.CON_COMPANY_SEC !== undefined) ? this.contract.CON_COMPANY_SEC : "");
                formData.append("CON_EMAIL", this.contract.CON_EMAIL ? this.contract.CON_EMAIL : "");
                formData.append("CON_NAME", this.contract.CON_NAME ? this.contract.CON_NAME : "");
                formData.append("CON_STAT", (this.contract.CON_STAT !== null && this.contract.CON_STAT !== "" && this.contract.CON_STAT !== undefined) ? this.contract.CON_STAT : "");
                formData.append("BAK_CON_PHONE", this.contract.BAK_CON_PHONE ? this.contract.BAK_CON_PHONE : "");
                formData.append("BAK_CON_TEL", this.contract.BAK_CON_TEL ? this.contract.BAK_CON_TEL : "");
                formData.append("CON_PHONE", this.contract.BAK_CON_PHONE ? this.contract.BAK_CON_PHONE : "");
                formData.append("CON_TEL", this.contract.BAK_CON_TEL ? this.contract.BAK_CON_TEL : "");
                formData.append("CON_TYPE", (this.contract.CON_TYPE !== null && this.contract.CON_TYPE !== "" && this.contract.CON_TYPE !== undefined) ? this.contract.CON_TYPE : "");
                formData.append("END_TIME", this.contract.END_TIME ? this.contract.END_TIME : "");
                formData.append("ID", this.contract.ID ? this.contract.ID : "");
                formData.append("IS_RENEWAL", (this.contract.IS_RENEWAL !== null && this.contract.IS_RENEWAL !== "" && this.contract.IS_RENEWAL !== undefined) ? this.contract.IS_RENEWAL : "");
                formData.append("SP_BANK_CD", this.contract.SP_BANK_CD ? this.contract.SP_BANK_CD : "");
                formData.append("START_TIME", this.contract.START_TIME ? this.contract.START_TIME : "");
                formData.append("SWIFT_CODE", this.contract.SWIFT_CODE ? this.contract.SWIFT_CODE : "");
                formData.append("amount", this.contract.amount ? this.contract.amount : "");
                formData.append("collection_account_name", this.contract.collection_account_name ? this.contract.collection_account_name : "");
                formData.append("currency_cd", (this.contract.currency_cd !== null && this.contract.currency_cd !== "" && this.contract.currency_cd !== undefined) ? this.contract.currency_cd : "");
                formData.append("desc", this.contract.desc ? this.contract.desc : "");
                formData.append("distribution", this.contract.distribution ? this.contract.distribution : "");
                formData.append("have_tax", (this.contract.have_tax !== null && this.contract.have_tax !== "" && this.contract.have_tax !== undefined) ? this.contract.have_tax : "");
                formData.append("invoice_type_cd", (this.contract.invoice_type_cd !== null && this.contract.invoice_type_cd !== "" && this.contract.have_tax !== undefined) ? this.contract.invoice_type_cd : "");
                formData.append("other", this.contract.other ? this.contract.other : "");
                formData.append("pay_content", this.contract.pay_content ? this.contract.pay_content : "");
                formData.append("supplier_id", this.contract.supplier_id ? this.contract.supplier_id : "");
                formData.append("type", type)

                this.$refs['form'].validate((valid) => {
                    if (valid) {
                        this.saving = true
                        axios.post(`/index.php?m=ContractNew&a=createContractInfo`, formData, {
                            headers: {
                                'Content-Type': 'multipart/form-data',
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        })
                            .then(res => {
                                if (res.data.code === 2000) {
                                    this.saving = false;
                                    this.$message.success(this.$lang('提交成功'));
                                    this.getDetailById();

                                } else {
                                    this.$message.error(res.data.msg ? res.data.msg : "");
                                    this.saving = false;
                                }
                            }).catch(() => {
                            this.$message.error(this.$lang('提交失败'));
                            this.saving = false
                        });
                    } else {
                        return false;
                    }
                });
            },
            //存草稿
            onSaveByDraftState(type) {
                let formData = new FormData();
                this.contract.finalizeContract.forEach((obj) => {
                    formData.append("contract_agreement[]", obj.contract_agreement);
                    formData.append("SP_ANNEX_ADDR3[]", obj.SP_ANNEX_ADDR3);
                });

                let fileNames = "";
                if (this.fileList[0].length !== 0) {
                    Object.keys(this.fileList).forEach((key) => {
                        fileNames += this.fileList[key][0].original_name + ","
                    });
                    fileNames = fileNames.substring(0, fileNames.length - 1)
                }

                formData.append("already_exist", fileNames);// 初稿合同已存在的名称
                formData.append("SP_NAME", this.contract.SP_NAME ? this.contract.SP_NAME : "");
                formData.append("BANK_ACCOUNT", this.contract.BANK_ACCOUNT ? this.contract.BANK_ACCOUNT : "");
                formData.append("CONTACT", this.contract.CONTACT ? this.contract.CONTACT : "");
                formData.append("CONTRACTOR", this.contract.CONTRACTOR ? this.contract.CONTRACTOR : "");
                formData.append("CONTRACT_TYPE", (this.contract.CONTRACT_TYPE !== null && this.contract.CONTRACT_TYPE !== "" && this.contract.CONTRACT_TYPE !== undefined) ? this.contract.CONTRACT_TYPE : "");
                formData.append("CON_COMPANY_CD", (this.contract.CON_COMPANY_CD !== null && this.contract.CON_COMPANY_CD !== "" && this.contract.CON_COMPANY_CD !== undefined) ? this.contract.CON_COMPANY_CD : "");
                formData.append("CON_COMPANY_SEC", (this.contract.CON_COMPANY_SEC !== null && this.contract.CON_COMPANY_SEC !== "" && this.contract.CON_COMPANY_SEC !== undefined) ? this.contract.CON_COMPANY_SEC : "");
                formData.append("CON_EMAIL", this.contract.CON_EMAIL ? this.contract.CON_EMAIL : "");
                formData.append("CON_NAME", this.contract.CON_NAME ? this.contract.CON_NAME : "");
                formData.append("CON_STAT", (this.contract.CON_STAT !== null && this.contract.CON_STAT !== "" && this.contract.CON_STAT !== undefined) ? this.contract.CON_STAT : "");
                formData.append("BAK_CON_PHONE", this.contract.BAK_CON_PHONE ? this.contract.BAK_CON_PHONE : ""); //明码字段
                formData.append("BAK_CON_TEL", this.contract.BAK_CON_TEL ? this.contract.BAK_CON_TEL : "");  //明码字段
                formData.append("CON_PHONE", this.contract.BAK_CON_PHONE ? this.contract.BAK_CON_PHONE : "");
                formData.append("CON_TEL", this.contract.BAK_CON_TEL ? this.contract.BAK_CON_TEL : "");

                formData.append("CON_TYPE", (this.contract.CON_TYPE !== null && this.contract.CON_TYPE !== "" && this.contract.CON_TYPE !== undefined) ? this.contract.CON_TYPE : "");
                formData.append("END_TIME", this.contract.END_TIME ? this.contract.END_TIME : "");
                formData.append("ID", this.contract.ID ? this.contract.ID : "");
                formData.append("IS_RENEWAL", (this.contract.IS_RENEWAL !== null && this.contract.IS_RENEWAL !== "" && this.contract.IS_RENEWAL !== undefined) ? this.contract.IS_RENEWAL : "");
                formData.append("SP_BANK_CD", this.contract.SP_BANK_CD ? this.contract.SP_BANK_CD : "");
                formData.append("START_TIME", this.contract.START_TIME ? this.contract.START_TIME : "");
                formData.append("SWIFT_CODE", this.contract.SWIFT_CODE ? this.contract.SWIFT_CODE : "");
                formData.append("amount", this.contract.amount ? this.contract.amount : "");
                formData.append("collection_account_name", this.contract.collection_account_name ? this.contract.collection_account_name : "");
                formData.append("currency_cd", (this.contract.currency_cd !== null && this.contract.currency_cd !== "" && this.contract.currency_cd !== undefined) ? this.contract.currency_cd : "");
                formData.append("desc", this.contract.desc ? this.contract.desc : "");
                formData.append("distribution", this.contract.distribution ? this.contract.distribution : "");
                formData.append("have_tax", (this.contract.have_tax !== null && this.contract.have_tax !== "" && this.contract.have_tax !== undefined) ? this.contract.have_tax : "");
                formData.append("invoice_type_cd", (this.contract.invoice_type_cd !== null && this.contract.invoice_type_cd !== "" && this.contract.have_tax !== undefined) ? this.contract.invoice_type_cd : "");
                formData.append("other", this.contract.other ? this.contract.other : "");
                formData.append("pay_content", this.contract.pay_content ? this.contract.pay_content : "");
                formData.append("supplier_id", this.contract.supplier_id ? this.contract.supplier_id : "");
                formData.append("type", type)

                this.saving = true
                axios.post(`/index.php?m=ContractNew&a=createContractInfo`, formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data',
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                    .then(res => {
                        if (res.data.code === 2000) {
                            this.saving = false;
                            this.$message.success(this.$lang('存草稿成功'));
                            closeTab();
                        } else {
                            this.$message.error(res.data.msg ? res.data.msg : "");
                            this.saving = false;
                        }
                    }).catch(() => {
                    this.$message.error(this.$lang('存草稿失败'));
                    this.saving = false
                });
            },
            onCloseApproval() {
                this.$confirm(this.$lang('确认取消此次合同审批申请吗？'), this.$lang('提示')).then(() => {
                    axios.post(`/index.php?m=ContractNew&a=createContractInfo`, {
                        type: "3",
                        ID: this.contract.ID
                    })
                        .then(res => {
                            if (res.data.code === 2000) {
                                this.saving = false;
                                this.$message.success(this.$lang('取消成功'));
                                closeTab();
                            } else {
                                this.$message.error(res.data.msg ? res.data.msg : "");
                                this.saving = false;
                            }
                        }).catch(() => {
                        this.$message.success(this.$lang('取消失败'));
                        this.saving = false
                    });
                })

            },
            onLogDetail() {

                let a = document.createElement('a');
                let href = "/index.php?m=contract&a=log_new&ID=" + this.contract.ID;
                a.setAttribute("onclick", "changenewtab(this,'" + this.$lang('合同审批日志') + "')");
                a.setAttribute("_href", href);
                a.click();
            },
            onDownload(id, type, businessLicenseType, name) {
                const a = document.createElement('a'); // 创建a标签
                //区分供应商和采购供应商
                if (type === '0') { //采购供应商
                    if (businessLicenseType === '0') { //主体营业执照
                        a.setAttribute('download', name);// download属性
                        a.setAttribute('href', `/index.php?m=supplier&a=business_license_download&ID=${id}`);// href链接
                        a.click();
                    } else if (businessLicenseType === '1') { //关联营业执照
                        a.setAttribute('download', name);// download属性
                        a.setAttribute('href', `/index.php?m=supplier&a=company_file_download&ID=${id}`);// href链接
                        a.click();
                    }

                } else if (type === '1') { //b2b供应商
                    if (businessLicenseType === '0') { //主体营业执照
                        a.setAttribute('download', name);// download属性
                        a.setAttribute('href', `/index.php?m=b_t_b_customer_management&a=business_license_download&ID=${id}`);// href链接
                        a.click();

                    } else if (businessLicenseType === '1') { //关联营业执照
                        a.setAttribute('download', name);// download属性
                        a.setAttribute('href', `/index.php?m=b_t_b_customer_management&a=company_file_download&ID=${id}`);// href链接
                        a.click();
                    }
                }

            },
            trademarkNumberBlur(val){
              console.log(val);
              axios.post("/index.php?m=Trademark&a=getTrademarkInfo", {
                trademark_no:val
              }).then((res) => {
                console.log(res);
                if (res.data.code === 200) {
                  this.getTrademarkInfoData = res.data.data
                } else {
                  this.$message.error(this.$lang(data.msg));
                }
              }).catch(err => {
                console.log(err)
              });
            }
        }
    });
</script>
</body>
</html>
