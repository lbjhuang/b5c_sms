<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>开关</title>
    <link rel="stylesheet" href="../Public/utils/css/public.style.css?v=0907">
    <link rel="stylesheet" href="./Application/Tpl/Home/Public/css/element-ui-2.2.css">
    <link rel="stylesheet" href="../Public/../Hr/depList.css?v=123">
    <link rel="stylesheet" href="../Public/icon/css/font-awesome.min.css">
    <link rel="stylesheet" href="./Application/Tpl/Home/Public/css/default.css?v=<{$Think.const.V}>">

</head>

<body>

<div id="detail" v-cloak class="recruit use-btn">
    <foreach name="switch_list" key="key" item="value">
        <p>
            <span><{$value['name']}></span>
            <el-switch
                    style="display: block"
                    v-model="switch_list.<{$key}>.value"
                    active-color="#13ce66"
                    inactive-color="#ff4949"
                    active-text="开"
                    inactive-text="关"
                    @change="update_<{$key}>">
            </el-switch>
        </p>
    </foreach>
</div>


<script type="text/javascript" src="./Application/Tpl/Home/Public/js/vue.2.5.13.js"></script>
<script type="text/javascript" src="./Application/Tpl/Home/Public/js/axios.min.js"></script>
<script type="text/javascript" src="./Application/Tpl/Home/Public/js/element-ui-2.2.js"></script>
<script type="text/javascript">
    var detail = new Vue({
        el: '#detail',
        data: {
            "switch_list": <{$switch_list_json}>,
        },
        methods:{
            update_erp_switch_update_order_from_es:function () {
                var params = {
                    erp_switch:'update_order_from_es',
                    value:this.switch_list.erp_switch_update_order_from_es.value
                };
                axios.post('/index.php?m=Tool&a=updateSwitchEs', params).then(function(response) {
                    if (response.data.code == 2000) {
                        this.$message('success');
                    } else {
                        this.$message({
                            message: 'error',
                            type: 'warning'
                        });
                    }
                }).catch(function(err) {
                });
            },
        update_erp_switch_make_up_ebay_every_four_hour:function () {
                var params = {
                    erp_switch:'make_up_ebay_every_four_hour',
                    value:this.switch_list.erp_switch_make_up_ebay_every_four_hour.value
                };
                axios.post('/index.php?m=Tool&a=updateSwitchEs', params).then(function(response) {
                    if (response.data.code == 2000) {
                        this.$message('success');
                    } else {
                        this.$message({
                            message: 'error',
                            type: 'warning'
                        });
                    }
                }).catch(function(err) {
                });
            }
    ,
        update_erp_switch_update_https_request:function () {
            var params = {
                erp_switch:'update_https_request',
                value:this.switch_list.erp_switch_update_https_request.value
            };
            axios.post('/index.php?m=Tool&a=updateSwitchEs', params).then(function(response) {
                if (response.data.code == 2000) {
                    this.$message('success');
                } else {
                    this.$message({
                        message: 'error',
                        type: 'warning'
                    });
                }
            }).catch(function(err) {
            });
        },
        }
    })
</script>
</body>

</html>